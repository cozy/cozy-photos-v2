// Generated by CoffeeScript 1.9.1
var albumPhotosRequest, allMap, byAlbumMap, byTitleMap, emit, imageByDate, withoutThumb;

emit = null;

allMap = function(doc) {
  return emit(doc._id, doc);
};

byTitleMap = function(doc) {
  return emit(doc.title, doc);
};

byAlbumMap = function(photo) {
  return emit([photo.albumid, photo.title], photo);
};

imageByDate = function(doc) {
  var ref;
  if (doc["class"] === "image" && (((ref = doc.binary) != null ? ref.file : void 0) != null)) {
    return emit(doc.lastModification, doc);
  }
};

withoutThumb = function(doc) {
  var ref;
  if (doc["class"] === "image" && (((ref = doc.binary) != null ? ref.file : void 0) != null) && (doc.binary.thumb == null)) {
    return emit(doc._id, doc);
  }
};

albumPhotosRequest = {
  map: function(photo) {
    return emit(photo.albumid, [photo._id, photo.orientation]);
  },
  reduce: function(key, values, rereduce) {
    return values[0];
  }
};

module.exports = {
  'album': {
    'all': allMap,
    'byTitle': byTitleMap
  },
  'photo': {
    'all': allMap,
    'byalbum': byAlbumMap,
    'albumphotos': albumPhotosRequest
  },
  'contact': {
    'all': allMap
  },
  'file': {
    'imageByDate': imageByDate,
    'withoutThumb': withoutThumb
  }
};
