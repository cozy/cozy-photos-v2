{"version":3,"sources":["app/application.coffee","app/collections/album.coffee","app/collections/photo.coffee","app/initialize.coffee","app/lib/base_view.coffee","app/lib/client.coffee","app/lib/clipboard.coffee","app/lib/helpers.coffee","app/lib/modal.coffee","app/lib/socket_listener.coffee","app/lib/view_collection.coffee","app/locales/de.coffee","app/locales/en.coffee","app/locales/es.coffee","app/locales/fr.coffee","app/models/album.coffee","app/models/photo.coffee","app/models/photoprocessor.coffee","app/models/thumbprocessor.coffee","app/router.coffee","app/templates/album.jade","app/templates/albumlist.jade","app/templates/albumlist_item.jade","app/templates/browser.jade","app/templates/galery.jade","app/templates/photo.jade","app/views/album.coffee","app/views/albumslist.coffee","app/views/albumslist_item.coffee","app/views/browser.coffee","app/views/galery.coffee","app/views/photo.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAAA,iBAAiB,QAAQ,uBAAR,CAAjB;;AAAA,MAEM,CAAC,OAAP,GAEI;AAAA,cAAY;AAER;AAAA,UAAM,CAAC,GAAP,GAAa,IAAb;AAAA,IAEA,IAAC,OAAD,GAAU,MAAM,CAAC,MAFjB;AAAA,IAGA,IAAC,SAAD,GAAgB,cAHhB;AAIA;AACI,gBAAU,QAAQ,aAAY,IAAC,OAArB,CAAV,CADJ;KAAA;AAGI,MADE,UACF;AAAA,gBAAU,QAAQ,YAAR,CAAV,CAHJ;KAJA;AAAA,IASA,IAAC,SAAQ,CAAC,MAAV,CAAiB,OAAjB,CATA;AAAA,IAUA,MAAM,CAAC,CAAP,GAAW,IAAC,SAAQ,CAAC,CAAC,CAAC,IAAZ,CAAiB,IAAC,SAAlB,CAVX;AAAA,IAYA,kBAAkB,QAAQ,mBAAR,CAZlB;AAAA,IAaA,SAAS,QAAQ,QAAR,CAbT;AAAA,IAeA,IAAC,OAAD,GAAc,YAfd;AAAA,IAgBA,IAAC,eAAD,GAAsB,oBAhBtB;AAAA,IAkBA,EAAE,MAAF,CAAS,CAAC,EAAV,CAAa,YAAb,EAA2B,IAAC,OAAM,CAAC,UAAnC,CAlBA;AAAA,IAmBA,EAAE,MAAF,CAAS,CAAC,EAAV,CAAa,cAAb,EAA6B,IAAC,OAAM,CAAC,YAArC,CAnBA;AAAA,IAsBA,IAAC,OAAD,GAAc,qBAtBd;AAAA,IAwBA,IAAC,OAAD,GAAU,EAxBV;AAyBA,QAAG,MAAM,CAAC,QAAQ,CAAC,MAAnB;AACI;AAAA;yBAAA;AACI,gBAAe,KAAK,CAAC,KAAN,CAAY,GAAZ,CAAf,EAAC,cAAD,EAAM,gBAAN;AACA,YAA6B,QAAO,KAApC;AAAA,cAAC,OAAD,GAAW,UAAM,KAAjB;SAFJ;AAAA,OADJ;KAzBA;AAAA,IA8BA,IAAC,KAAD,GAAW,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAzB,CAA+B,QAA/B,CAAH,GAAgD,QAAhD,GACH,OA/BL;AAkCA,QAAG,MAAM,CAAC,UAAV;AACI,UAAC,OAAM,CAAC,KAAR,CAAc,MAAM,CAAC,UAArB,EAAiC;AAAA,eAAO,IAAP;OAAjC;AAAA,MACA,aAAa,CAAC,UADd;aAEA,QAAQ,CAAC,OAAO,CAAC,KAAjB,GAHJ;KAAA;aAKI,IAAC,OAAM,CAAC,KAAR,EAAe,CAAC,IAAhB,CAAqB;eAAG,QAAQ,CAAC,OAAO,CAAC,KAAjB,GAAH;MAAA,CAArB,EALJ;KApCQ;EAAA,CAAZ;CAJJ;;;;ACIA;EAAA;iSAAA;;AAAA,MAAM,CAAC,OAAP,GAAuB;AAEnB;;;;GAAA;;AAAA,oCAAO,QAAQ,cAAR,CAAP;;AAAA,4BACA,MAAK,WAAW,GAAG,CAAC,MADpB;;AAAA,4BAEA,aAAY,SAAC,KAAD;WAAW,KAAK,CAAC,GAAN,CAAU,OAAV,EAAX;EAAA,CAFZ;;yBAAA;;GAF2C,QAAQ,CAAC,WAAxD;;;;ACAA;EAAA;iSAAA;;AAAA,MAAM,CAAC,OAAP,GAAuB;AAEnB;;;;GAAA;;AAAA,oCAAO,QAAQ,cAAR,CAAP;;AAAA,4BACA,MAAK;WAAG,WAAW,GAAG,CAAC,OAAlB;EAAA,CADL;;AAAA,4BAEA,aAAY,SAAC,KAAD;WAAW,KAAK,CAAC,GAAN,CAAU,OAAV,EAAX;EAAA,CAFZ;;yBAAA;;GAF2C,QAAQ,CAAC,WAAxD;;;;ACJA;;AAAA,MAAM,QAAQ,aAAR,CAAN;;AAAA,CAEA,CAAE;AACE,QAAM,CAAC,KAAK,CAAC,KAAK,CAAC,IAAnB,CAAwB,cAAxB;AAAA,EACA,GAAG,CAAC,UAAJ,EADA;SAIA,CAAC,CAAC,EAAE,CAAC,IAAL,GAAY,SAAC,IAAD,EAAO,KAAP;AACR;AAAA,cACI;AAAA,YACI;AAAA,eAAO,CAAP;AAAA,QACA,QAAQ,CADR;AAAA,QAEA,OAAO,CAFP;AAAA,QAGA,QAAQ,CAHR;OADJ;AAAA,MAMA,OACI;AAAA,eAAO,CAAP;AAAA,QACA,QAAQ,CADR;AAAA,QAEA,OAAO,CAFP;AAAA,QAGA,QAAQ,CAHR;OAPJ;AAAA,MAYA,OACI;AAAA,eAAO,EAAP;AAAA,QACA,QAAQ,CADR;AAAA,QAEA,OAAO,CAFP;AAAA,QAGA,QAAQ,CAHR;OAbJ;KADJ;AAmBA,QAAG,OAAH;aACI,IAAC,KAAD,CAAM;AACF;AAAA,gBAAQ,EAAE,IAAF,CAAR;AAAA,QACA,UAAU,KAAK,CAAC,IAAN,CAAW,SAAX,CADV;AAEA,YAAG,eAAH;AACI,iBAAO,CAAC,IAAR;iBACA,KAAK,CAAC,IAAN,CAAW,SAAX,EAAsB,IAAtB,EAFJ;SAAA,MAGK,IAAG,SAAU,KAAb;AACD,cAAG,gBAAe,QAAlB;AACI,gBAAG,QAAQ,OAAX;AACI,qBAAO,OAAQ,MAAf,CADJ;aAAA;AAGI,qBAAO,EAAP,CAHJ;aAAA;AAIA,gBAAyB,KAAzB;AAAA,kBAAI,CAAC,KAAL,GAAa,KAAb;aALJ;WAAA;AAAA,UAMA,UAAc,YACV,CAAC,CAAC,MAAF,CAAS;AAAA,mBAAO,KAAK,CAAC,GAAN,CAAU,OAAV,CAAP;WAAT,EAAoC,IAApC,CADU,CANd;AAAA,UAQA,OAAO,CAAC,IAAR,CAAa,IAAb,CARA;iBASA,KAAK,CAAC,IAAN,CAAW,SAAX,EAAsB,OAAtB,EAVC;SANH;MAAA,CAAN,EADJ;KAAA;AAoBI,aAAO,CAAC,GAAR,CAAY,8BAAZ;aACA,KArBJ;KApBQ;EAAA,EALd;AAAA,CAAF,CAFA;;;;ACMA;EAAA;;iSAAA;;AAAA,MAAM,CAAC,OAAP,GAAuB;AACnB;;;;;GAAA;;AAAA,kCAAY,SAAC,OAAD;WACR,IAAC,QAAD,GAAW,QADH;EAAA,CAAZ;;AAAA,qBAGA,WAAU,aAHV;;AAAA,qBAKA,gBAAe,aALf;;AAAA,qBAOA,SAAQ;AACJ;AAAA,WAAO,CAAC,CAAC,MAAF,CAAS,EAAT,EAAa,IAAC,QAAd,EAAuB,IAAC,cAAD,EAAvB,CAAP;AAAA,IACA,IAAC,IAAG,CAAC,IAAL,CAAU,IAAC,SAAD,CAAU,IAAV,CAAV,CADA;AAAA,IAEA,IAAC,YAAD,EAFA;WAGA,KAJI;EAAA,CAPR;;AAAA,qBAaA,cAAa,aAbb;;kBAAA;;GADoC,QAAQ,CAAC,KAAjD;;;;ACHA,OAAO,CAAC,OAAR,GAAkB,SAAC,IAAD,EAAO,GAAP,EAAY,IAAZ,EAAkB,SAAlB;AAEd;AAAA,YAAU,SAAS,CAAC,OAAV,IAAqB,SAAC,GAAD;WAAS,UAAU,IAAV,EAAgB,GAAhB,EAAT;EAAA,CAA/B;AAAA,EACA,QAAQ,SAAS,CAAC,KAAV,IAAmB,SAAC,GAAD;WAAS,UAAU,GAAV,EAAT;EAAA,CAD3B;SAIA,CAAC,CAAC,IAAF,CACI;AAAA,UAAM,IAAN;AAAA,IACA,KAAK,GADL;AAAA,IAEA,MAAM,IAFN;AAAA,IAGA,SAAS,OAHT;AAAA,IAIA,OAAO,KAJP;GADJ,EANc;AAAA,CAAlB;;AAAA,OAeO,CAAC,GAAR,GAAc,SAAC,GAAD,EAAM,SAAN;SACV,OAAO,CAAC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,EAA4B,IAA5B,EAAkC,SAAlC,EADU;AAAA,CAfd;;AAAA,OAoBO,CAAC,IAAR,GAAe,SAAC,GAAD,EAAM,IAAN,EAAY,SAAZ;SACX,OAAO,CAAC,OAAR,CAAgB,MAAhB,EAAwB,GAAxB,EAA6B,IAA7B,EAAmC,SAAnC,EADW;AAAA,CApBf;;AAAA,OAyBO,CAAC,GAAR,GAAc,SAAC,GAAD,EAAM,IAAN,EAAY,SAAZ;SACV,OAAO,CAAC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,EAA4B,IAA5B,EAAkC,SAAlC,EADU;AAAA,CAzBd;;AAAA,OA8BO,CAAC,GAAR,GAAc,SAAC,GAAD,EAAM,SAAN;SACV,OAAO,CAAC,OAAR,CAAgB,QAAhB,EAA0B,GAA1B,EAA+B,IAA/B,EAAqC,SAArC,EADU;AAAA,CA9Bd;;;;ACFA;EAAA;;AAAA,MAAM,CAAC,OAAP,GAAuB;AAEN;AACT;AAAA,QAAC,MAAD,GAAS,EAAT;AAAA,IAEA,EAAE,QAAF,CAAW,CAAC,OAAZ,CAAoB;aAAA,SAAC,CAAD;AAEhB;AAAA,YAAG,MAAK,MAAL,IAAc,EAAI,CAAC,CAAC,OAAF,IAAa,CAAC,CAAC,OAAhB,CAApB;AACI,iBADJ;SAAA;AAEA,qGAAyB,CAAE,QAAxB,oBAAH;AACI,iBADJ;SAFA;AAKA,wDAAqB,CAAE,WAApB,EAAiC,CAAC,aAArC;AACI,iBADJ;SALA;eAOA,CAAC,CAAC,KAAF,CAAQ;AACJ;AAAA,gCAAsB,EAAE,sBAAF,CAAtB;AAAA,UACA,mBAAmB,CAAC,KAApB,EAA2B,CAAC,IAA5B,EADA;iBAEA,EAAE,sCAAF,CACA,CAAC,GADD,CACK,KAAC,MADN,CAEA,CAAC,QAFD,CAEU,mBAFV,CAGA,CAAC,KAHD,EAIA,CAAC,MAJD,GAHI;QAAA,CAAR,EATgB;MAAA;IAAA,QAApB,CAFA;AAAA,IAoBA,EAAE,QAAF,CAAW,CAAC,KAAZ,CAAkB;aAAA,SAAC,CAAD;AACd,YAAG,EAAE,CAAC,CAAC,MAAJ,CAAW,CAAC,EAAZ,CAAe,YAAf,CAAH;AACI,YAAE,sCAAF,CAAyC,CAAC,GAA1C,CAA8C,EAA9C;iBACA,EAAE,sBAAF,CAAyB,CAAC,KAA1B,EAAiC,CAAC,IAAlC,GAFJ;SADc;MAAA;IAAA,QAAlB,CApBA,CADS;EAAA,CAAb;;AAAA,sBA0BA,MAAK,SAAC,KAAD;WACD,IAAC,MAAD,GAAS,MADR;EAAA,CA1BL;;mBAAA;;IAFJ;;;;ACDA,MAAM,CAAC,OAAP,GAKI;AAAA,eAAa,SAAC,MAAD,EAAS,MAAT;AACT,QAAG,oBAAY,MAAM,CAAC,MAAP,GAAgB,MAA/B;aACK,MAAM,CAAC,SAAP,CAAiB,CAAjB,EAAoB,MAApB,IAA8B,MADnC;KAAA;aAEK,OAFL;KADS;EAAA,CAAb;AAAA,EAMA,YAAY,SAAC,EAAD;AACR;AAAA,YAAQ,QAAQ,CAAC,WAAT,EAAR;AAAA,IACA,KAAK,CAAC,kBAAN,CAAyB,EAAG,GAA5B,CADA;AAAA,IAEA,MAAM,QAAQ,CAAC,YAAT,EAFN;AAAA,IAGA,GAAG,CAAC,eAAJ,EAHA;AAAA,IAIA,GAAG,CAAC,QAAJ,CAAa,KAAb,CAJA;WAKA,EAAE,CAAC,KAAH,GANQ;EAAA,CANZ;AAAA,EAiBA,QAAQ,SAAC,WAAD,EAAc,KAAd;AACJ;AAAA,QAAG,SAAS,CAAC,SAAS,CAAC,MAApB,CAA2B,SAA3B,MAA2C,EAA9C;AACI,kBAAY,WAAZ,CADJ;KAAA;AAGI,kBAAY,mBAAZ,CAHJ;KAAA;AAIA,QAAG,gBAAe,MAAf,IAA4B,gBAAe,CAA9C;MACI,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,YAAY,CAAZ,GAAgB,MAArC,EADJ;KAAA,MAGK,IAAG,gBAAe,CAAlB;aACD,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,cAArB,EADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;aACD,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,YAAY,GAAZ,GAAkB,MAAvC,EADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;aACD,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,cAArB,EADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;aACD,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,YAAY,GAAZ,GAAkB,oBAAvC,EADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;aACD,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,YAAY,EAAZ,GAAiB,MAAtC,EADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;aACD,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,YAAY,EAAZ,GAAiB,mBAAtC,EADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;aACD,KAAK,CAAC,GAAN,CAAU,SAAV,EAAqB,YAAY,GAAZ,GAAkB,MAAvC,EADC;KApBD;EAAA,CAjBR;AAAA,EAwCA,WAAW,SAAC,WAAD,EAAc,KAAd;AACP;AAAA,QAAG,SAAS,CAAC,SAAS,CAAC,MAApB,CAA2B,SAA3B,MAA2C,EAA9C;AACI,kBAAY,WAAZ,CADJ;KAAA;AAGI,kBAAY,mBAAZ,CAHJ;KAAA;AAIA,QAAG,gBAAe,MAAf,IAA4B,gBAAe,CAA9C;AACI,aAAO,YAAY,WAAZ,GAA0B,CAA1B,GAA8B,MAArC,CADJ;KAAA,MAEK,IAAG,gBAAe,CAAlB;AACD,aAAO,YAAY,gBAAnB,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,YAAY,WAAZ,GAA0B,GAA1B,GAAgC,MAAvC,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,YAAY,gBAAnB,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,YAAY,WAAZ,GAA0B,GAA1B,GAAgC,oBAAvC,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,YAAY,WAAZ,GAA0B,EAA1B,GAA+B,MAAtC,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,YAAY,WAAZ,GAA0B,EAA1B,GAA+B,mBAAtC,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,YAAY,WAAZ,GAA0B,GAA1B,GAAgC,MAAvC,CADC;KAnBE;EAAA,CAxCX;AAAA,EA8DA,YAAY,SAAC,WAAD,EAAc,KAAd;AACR,QAAG,gBAAe,MAAf,IAA4B,gBAAe,CAA9C;AACI,aAAO,CAAP,CADJ;KAAA,MAEK,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAfG;EAAA,CA9DZ;AAAA,EAgFA,aAAa,SAAC,WAAD,EAAc,KAAd;AACT,QAAG,gBAAe,MAAf,IAA4B,gBAAe,CAA9C;AACI,aAAO,CAAP,CADJ;KAAA,MAEK,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAAA,MAEA,IAAG,gBAAe,CAAlB;AACD,aAAO,CAAP,CADC;KAfI;EAAA,CAhFb;CALJ;;;;ACAA;EAAA;iSAAA;;AAAA,WAAW,QAAQ,kBAAR,CAAX;;AAAA,MAEM,CAAC,OAAP,GAAuB;AAEnB;;AAAA,2BAAI,cAAJ;;AAAA,sBACA,YAAW,YADX;;AAAA,sBAEA,aACI;AAAA,iBAAa,EAAb;GAHJ;;AAAA,sBAIA,WAAU,QAAQ,mBAAR,CAJV;;AAAA,sBAKA,QAAO,CALP;;AAAA,sBAOA,SAAQ;WACJ;AAAA,gCAA4B,MAA5B;AAAA,MACA,2BAA4B,OAD5B;MADI;EAAA,CAPR;;AAWa,qBAAE,KAAF,EAAU,GAAV,EAAgB,GAAhB,EAAsB,EAAtB,EAA2B,EAA3B,EAAgC,SAAhC;AACT,IADU,IAAC,cACX;AAAA,IADkB,IAAC,UACnB;AAAA,IADwB,IAAC,UACzB;AAAA,IAD8B,IAAC,QAC/B;AAAA,IADmC,IAAC,QACpC;AAAA,IADwC,IAAC,sBACzC;AAAA;AACA,QAAyB,sBAAzB;AAAA,UAAC,UAAD,GAAa,IAAb;KAFS;EAAA,CAXb;;AAAA,sBAeA,aAAY;AACR,QAAC,IAAG,CAAC,EAAL,CAAQ,iBAAR,EAA2B;aAAA;eAAG,KAAC,MAAD,GAAH;MAAA;IAAA,QAA3B;AAAA,IAEA,IAAC,OAAD,EAFA;WAGA,IAAC,KAAD,GAJQ;EAAA,CAfZ;;AAAA,sBAqBA,QAAO;AACH,QAAY,IAAC,GAAb;AAAA,UAAC,GAAD,CAAI,IAAJ;KAAA;WACA,IAAC,KAAD,GAFG;EAAA,CArBP;;AAAA,sBAyBA,OAAM;AACF,QAAa,IAAC,GAAd;AAAA,UAAC,GAAD,CAAI,KAAJ;KAAA;AACA,QAAW,IAAC,UAAZ;aAAA,IAAC,KAAD;KAFE;EAAA,CAzBN;;AAAA,sBA6BA,SAAQ,aA7BR;;AAAA,sBA+BA,QAAO;WACH,WAAW,CAAC;aAAA;eAAM,KAAC,QAAD,GAAN;MAAA;IAAA,QAAD,CAAX,EAA+B,GAA/B,EADG;EAAA,CA/BP;;AAAA,sBAkCA,OAAM;AACF,QAAC,IAAG,CAAC,KAAL,CAAW,MAAX;WACA,IAAC,IAAG,CAAC,OAAL,CAAa,MAAb,EAFE;EAAA,CAlCN;;AAAA,sBAsCA,OAAM;AACF,QAAC,IAAG,CAAC,KAAL,CAAW,MAAX;WACA,IAAC,IAAG,CAAC,OAAL,CAAa,MAAb,EAFE;EAAA,CAtCN;;AAAA,sBA0CA,SAAQ;AACJ,QAAC,IAAG,CAAC,MAAL,CAAY,IAAC,SAAD,CAAU;AAAA,aAAO,IAAC,MAAR;AAAA,MAAe,KAAK,IAAC,IAArB;AAAA,MAA0B,KAAK,IAAC,IAAhC;AAAA,MAAqC,IAAI,IAAC,GAA1C;KAAV,CAAZ;AAAA,IACA,EAAE,MAAF,CAAS,CAAC,MAAV,CAAiB,IAAC,IAAlB,CADA;AAAA,IAEA,IAAC,YAAD,EAFA;WAGA,KAJI;EAAA,CA1CR;;mBAAA;;GAFqC,SAFzC;;AAAA,MAoDM,CAAC,OAAO,CAAC,KAAf,GAAuB,SAAC,IAAD,EAAO,EAAP;SACf,cAAU,EAAE,aAAF,CAAV,EAA4B,IAA5B,EAAkC,EAAE,UAAF,CAAlC,EAAiD,KAAjD,EAAwD,EAAxD,EADe;AAAA,CApDvB;;;;ACAA;EAAA;iSAAA;;AAAA,oBAAoB,QAAQ,mCAAR,CAApB;;AAAA,MAEM,CAAC,OAAP,GAAuB;AAEnB;;;;GAAA;;AAAA,qCAAQ,CACJ,gBADI,EAEJ,gBAFI,EAGJ,gBAHI,CAAR;;AAAA,4BAMA,UAAS,SAAC,KAAD;AACL,QAAG,KAAK,CAAC,OAAN,KAAiB,SAApB;aACI,iBAAiB,CAAC,0BAAlB,CAA6C,KAA7C,EADJ;KADK;EAAA,CANT;;yBAAA;;GAF2C,mBAF/C;;;;ACAA;EAAA;;iSAAA;;AAAA,WAAW,QAAQ,eAAR,CAAX;;AAAA,MAaM,CAAC,OAAP,GAAuB;AAEnB;;;;;;GAAA;;AAAA,mCAAO,EAAP;;AAAA,2BAEA,WAAU,IAFV;;AAAA,2BAKA,kBAAiB,aALjB;;AAAA,2BAQA,eAAc;WACV,IAAC,IAAG,CAAC,WAAL,CAAiB,OAAjB,EAA0B,CAAC,CAAC,IAAF,CAAO,IAAC,MAAR,MAAkB,CAA5C,EADU;EAAA,CARd;;AAAA,2BAYA,aAAY,SAAC,IAAD;AAER;AAAA,YAAQ,IAAC,WAAU,CAAC,OAAZ,CAAoB,IAAI,CAAC,KAAzB,CAAR;WAEA,IAAC,IAAG,CAAC,MAAL,CAAY,IAAI,CAAC,GAAjB,EAJQ;EAAA,CAZZ;;AAAA,2BA8BA,aAAY;AACR;AAAA,IACA,IAAC,MAAD,GAAS,EADT;AAAA,IAEA,IAAC,SAAD,CAAU,IAAC,WAAX,EAAuB,OAAvB,EAAkC,IAAC,QAAnC,CAFA;AAAA,IAGA,IAAC,SAAD,CAAU,IAAC,WAAX,EAAuB,KAAvB,EAAkC,IAAC,QAAnC,CAHA;AAAA,IAIA,IAAC,SAAD,CAAU,IAAC,WAAX,EAAuB,MAAvB,EAAkC,IAAC,OAAnC,CAJA;AAAA,IAKA,IAAC,SAAD,CAAU,IAAC,WAAX,EAAuB,QAAvB,EAAkC,IAAC,WAAnC,CALA;WAMA,IAAC,QAAD,CAAS,IAAC,WAAV,EAPQ;EAAA,CA9BZ;;AAAA,2BAwCA,SAAQ;AACJ;AAAA;AAAA;sBAAA;AAAA,UAAI,CAAC,GAAG,CAAC,MAAT;AAAA;WACA,uDAFI;EAAA,CAxCR;;AAAA,2BA6CA,cAAa;AACT;AAAA,QAAG,IAAC,WAAU,CAAC,MAAZ,GAAqB,CAAxB;AACI,WAAS,+GAAT;AACI,YAAC,WAAD,CAAY,IAAC,MAAM,KAAC,WAAU,CAAC,EAAZ,CAAe,CAAf,CAAiB,CAAC,GAAlB,CAAnB,EADJ;AAAA;aAGA,IAAC,aAAD,CAAc,IAAC,MAAf,EAJJ;KADS;EAAA,CA7Cb;;AAAA,2BAqDA,SAAQ;AACJ,QAAC,QAAD,CAAS,EAAT;WACA,uDAFI;EAAA,CArDR;;AAAA,2BA0DA,UAAS,SAAC,aAAD;AACL;AAAA;AAAA;sBAAA;AAAA,UAAI,CAAC,MAAL;AAAA;WACA,aAAa,CAAC,OAAd,CAAsB,IAAC,QAAvB,EAFK;EAAA,CA1DT;;AAAA,2BA+DA,UAAS,SAAC,KAAD;AACL;AAAA,cAAU,CAAC,CAAC,MAAF,CAAS,EAAT,EAAa;AAAA,MAAC,OAAO,KAAR;KAAb,EAA6B,IAAC,gBAAD,CAAiB,KAAjB,CAA7B,CAAV;AAAA,IACA,OAAW,QAAC,SAAD,CAAU,OAAV,CADX;AAAA,IAEA,IAAC,MAAM,MAAK,CAAC,GAAN,CAAP,GAAoB,IAAI,CAAC,MAAL,EAFpB;AAAA,IAGA,IAAC,WAAD,CAAY,IAAZ,CAHA;WAIA,IAAC,aAAD,CAAc,IAAC,MAAf,EALK;EAAA,CA/DT;;AAAA,2BAuEA,aAAY,SAAC,KAAD;AACR,QAAC,MAAM,MAAK,CAAC,GAAN,CAAU,CAAC,MAAlB;AAAA,IACA,WAAQ,MAAM,MAAK,CAAC,GAAN,CADd;WAEA,IAAC,aAAD,CAAc,IAAC,MAAf,EAHQ;EAAA,CAvEZ;;wBAAA;;GAF0C,SAb9C;;;;ACAA,MAAM,CAAC,OAAP,GAEI;AAAA,QAAM,MAAN;AAAA,EACA,QAAS,QADT;AAAA,EAEA,sBAAuB,uBAFvB;AAAA,EAGA,UAAW,SAHX;AAAA,EAIA,YAAa,eAJb;AAAA,EAKA,QAAS,YALT;AAAA,EAMA,gBAAiB,sBANjB;AAAA,EAOA,oCAAqC,wCAPrC;AAAA,EAQA,kBAAmB,WARnB;AAAA,EASA,mBAAoB,QATpB;AAAA,EAUA,kBAAmB,YAVnB;AAAA,EAWA,OAAQ,KAXR;AAAA,EAYA,WAAY,QAZZ;AAAA,EAaA,UAAW,YAbX;AAAA,EAcA,UAAW,WAdX;AAAA,EAeA,oCAAqC,gFAfrC;AAAA,EAgBA,8BAA+B,0BAhB/B;AAAA,EAiBA,yBAA0B,yBAjB1B;AAAA,EAkBA,wBAAyB,4BAlBzB;AAAA,EAmBA,wBAAyB,4BAnBzB;AAAA,EAoBA,qBAAsB,6CApBtB;AAAA,EAqBA,QAAS,SArBT;AAAA,EAsBA,2BAA4B,kCAtB5B;AAAA,EAuBA,yBAAwB,yBAvBxB;AAAA,EAwBA,mBAAmB,eAxBnB;AAAA,EAyBA,uBAAuB,yBAzBvB;AAAA,EA0BA,2BAA2B,0BA1B3B;AAAA,EA2BA,eAAe,cA3Bf;AAAA,EA4BA,eAAe,oBA5Bf;AAAA,EA6BA,aAAa,eA7Bb;AAAA,EA8BA,uBAAuB,wBA9BvB;AAAA,EA+BA,OAAO,YA/BP;AAAA,EAgCA,UAAU,WAhCV;AAAA,EAiCA,mCAAmC,qDAjCnC;AAAA,EAmCA,uCAAuC,6EAnCvC;AAAA,EAuCA,sBAAqB,oFAvCrB;AAAA,EA0CA,mBAAkB,6DA1ClB;AAAA,EA8CA,sBAAsB,oFA9CtB;AAAA,EAmDA,8CAA+C,qCAnD/C;AAAA,EAsDA,sBAAsB,sBAtDtB;AAAA,EAwDA,MAAM,QAxDN;AAAA,EAyDA,MAAM,SAzDN;AAAA,EA0DA,MAAM,MA1DN;AAAA,EA2DA,MAAM,OA3DN;AAAA,EA4DA,MAAM,KA5DN;AAAA,EA6DA,MAAM,MA7DN;AAAA,EA8DA,MAAM,MA9DN;AAAA,EA+DA,MAAM,QA/DN;AAAA,EAgEA,MAAM,WAhEN;AAAA,EAiEA,MAAM,SAjEN;AAAA,EAkEA,MAAM,UAlEN;AAAA,EAmEA,MAAM,UAnEN;AAAA,EAqEA,UAAW,WArEX;AAAA,EAsEA,mBAAoB,0EAtEpB;AAAA,EAuEA,WAAY,SAvEZ;AAAA,EAwEA,kBAAmB,YAxEnB;AAAA,EAyEA,kCAAmC,yCAzEnC;AAAA,EA0EA,iCAAkC,2CA1ElC;AAAA,EA2EA,+BAAgC,sEA3EhC;AAAA,EA4EA,gCAAoC,uEA5EpC;AAAA,EA6EA,gCAAoC,wIA7EpC;AAAA,EAgFA,oBAAqB,2BAhFrB;AAAA,EAiFA,cAAc,SAjFd;AAAA,EAkFA,cAAc,WAlFd;AAAA,EAmFA,YAAY,IAnFZ;AAAA,EAoFA,gBAAgB,WApFhB;AAAA,EAqFA,eAAe,QArFf;AAAA,EAsFA,oBAAqB,sEAtFrB;AAAA,EAuFA,UAAW,YAvFX;AAAA,EAwFA,WAAY,QAxFZ;AAAA,EAyFA,UAAW,SAzFX;AAAA,EA0FA,SAAU,QA1FV;AAAA,EA2FA,QAAS,WA3FT;AAAA,EA4FA,YAAa,YA5Fb;AAAA,EA6FA,uBAAwB,uCA7FxB;AAAA,EA8FA,WAAY,QA9FZ;AAAA,EA+FA,UAAW,SA/FX;AAAA,EAgGA,WAAY,YAhGZ;AAAA,EAiGA,oBAAqB,8EAjGrB;AAAA,EAmGA,sBAAuB,4GAnGvB;AAAA,EAqGA,cAAe,QArGf;AAAA,EAsGA,aAAc,WAtGd;AAAA,EAuGA,QAAS,MAvGT;AAAA,EAwGA,gBAAiB,2BAxGjB;AAAA,EAyGA,iBAAkB,mCAzGlB;AAAA,EA0GA,iBAAyB,uBA1GzB;AAAA,EA2GA,wBAAyB,yEA3GzB;AAAA,EA6GA,gBAAiB,4GA7GjB;AAAA,EAgHA,mBAAmB,6DAhHnB;AAAA,EAiHA,OAAQ,IAjHR;AAAA,EAkHA,MAAO,MAlHP;AAAA,EAmHA,WAAW,kBAnHX;AAAA,EAoHA,sBAAsB,gDApHtB;AAAA,EAqHA,8CAA8C,yCArH9C;AAAA,EAsHA,iBAAoB,WAtHpB;AAAA,EAuHA,mBAAoB,uBAvHpB;AAAA,EAwHA,kBAAoB,0CAxHpB;AAAA,EAyHA,YAAoB,aAzHpB;AAAA,EA0HA,0BAA2B,mEA1H3B;AAAA,EA2HA,qBAAqB,eA3HrB;CAFJ;;;;ACAA,MAAM,CAAC,OAAP,GAEI;AAAA,QAAM,IAAN;AAAA,EACA,QAAS,MADT;AAAA,EAEA,sBAAuB,oBAFvB;AAAA,EAGA,UAAW,QAHX;AAAA,EAIA,YAAa,UAJb;AAAA,EAKA,QAAS,MALT;AAAA,EAMA,gBAAiB,cANjB;AAAA,EAOA,oCAAqC,yCAPrC;AAAA,EAQA,kBAAmB,QARnB;AAAA,EASA,mBAAoB,SATpB;AAAA,EAUA,kBAAmB,QAVnB;AAAA,EAWA,OAAQ,KAXR;AAAA,EAYA,WAAY,SAZZ;AAAA,EAaA,UAAW,QAbX;AAAA,EAcA,UAAW,QAdX;AAAA,EAeA,oCAAqC,wEAfrC;AAAA,EAgBA,8BAA+B,sBAhB/B;AAAA,EAiBA,yBAA0B,uBAjB1B;AAAA,EAkBA,wBAAyB,sBAlBzB;AAAA,EAmBA,wBAAyB,sBAnBzB;AAAA,EAoBA,qBAAsB,6BApBtB;AAAA,EAqBA,QAAS,MArBT;AAAA,EAsBA,2BAA4B,sBAtB5B;AAAA,EAuBA,yBAAwB,uBAvBxB;AAAA,EAwBA,mBAAmB,iBAxBnB;AAAA,EAyBA,uBAAuB,qBAzBvB;AAAA,EA0BA,2BAA2B,uBA1B3B;AAAA,EA2BA,eAAe,aA3Bf;AAAA,EA4BA,eAAe,aA5Bf;AAAA,EA6BA,aAAa,WA7Bb;AAAA,EA8BA,uBAAuB,qBA9BvB;AAAA,EA+BA,OAAO,KA/BP;AAAA,EAgCA,UAAU,QAhCV;AAAA,EAiCA,mCAAmC,sDAjCnC;AAAA,EAmCA,uCAAuC,kDAnCvC;AAAA,EAuCA,sBAAqB,gEAvCrB;AAAA,EA0CA,mBAAkB,iDA1ClB;AAAA,EA8CA,sBAAsB,oFA9CtB;AAAA,EAmDA,8CAA+C,gCAnD/C;AAAA,EAsDA,sBAAsB,oBAtDtB;AAAA,EAwDA,MAAM,SAxDN;AAAA,EAyDA,MAAM,UAzDN;AAAA,EA0DA,MAAM,OA1DN;AAAA,EA2DA,MAAM,OA3DN;AAAA,EA4DA,MAAM,KA5DN;AAAA,EA6DA,MAAM,MA7DN;AAAA,EA8DA,MAAM,MA9DN;AAAA,EA+DA,MAAM,QA/DN;AAAA,EAgEA,MAAM,WAhEN;AAAA,EAiEA,MAAM,SAjEN;AAAA,EAkEA,MAAM,UAlEN;AAAA,EAmEA,MAAM,UAnEN;AAAA,EAqEA,UAAW,QArEX;AAAA,EAsEA,mBAAoB,6DAtEpB;AAAA,EAuEA,WAAY,SAvEZ;AAAA,EAwEA,kBAAmB,gBAxEnB;AAAA,EAyEA,kCAAmC,kCAzEnC;AAAA,EA0EA,iCAAkC,6BA1ElC;AAAA,EA2EA,+BAAgC,gDA3EhC;AAAA,EA4EA,gCAAoC,kDA5EpC;AAAA,EA6EA,gCAAoC,yHA7EpC;AAAA,EAgFA,oBAAqB,qBAhFrB;AAAA,EAiFA,cAAc,MAjFd;AAAA,EAkFA,cAAc,UAlFd;AAAA,EAmFA,YAAY,IAnFZ;AAAA,EAoFA,gBAAgB,QApFhB;AAAA,EAqFA,eAAe,OArFf;AAAA,EAsFA,oBAAqB,+DAtFrB;AAAA,EAuFA,UAAW,QAvFX;AAAA,EAwFA,WAAY,SAxFZ;AAAA,EAyFA,UAAW,QAzFX;AAAA,EA0FA,SAAU,OA1FV;AAAA,EA2FA,QAAS,MA3FT;AAAA,EA4FA,YAAa,UA5Fb;AAAA,EA6FA,uBAAwB,+BA7FxB;AAAA,EA8FA,WAAY,SA9FZ;AAAA,EA+FA,UAAW,QA/FX;AAAA,EAgGA,WAAY,SAhGZ;AAAA,EAiGA,oBAAqB,+CAjGrB;AAAA,EAmGA,sBAAuB,qFAnGvB;AAAA,EAqGA,cAAe,MArGf;AAAA,EAsGA,aAAc,SAtGd;AAAA,EAuGA,QAAS,MAvGT;AAAA,EAwGA,gBAAiB,mBAxGjB;AAAA,EAyGA,iBAAkB,0BAzGlB;AAAA,EA0GA,iBAAyB,eA1GzB;AAAA,EA2GA,wBAAyB,sDA3GzB;AAAA,EA6GA,gBAAiB,+EA7GjB;AAAA,EAgHA,mBAAmB,mDAhHnB;AAAA,EAiHA,OAAQ,KAjHR;AAAA,EAkHA,MAAO,IAlHP;AAAA,EAmHA,WAAW,uBAnHX;AAAA,EAoHA,sBAAsB,gDApHtB;AAAA,EAqHA,8CAA8C,6CArH9C;AAAA,EAsHA,iBAAoB,aAtHpB;AAAA,EAuHA,mBAAoB,iBAvHpB;AAAA,EAwHA,kBAAoB,uCAxHpB;AAAA,EAyHA,YAAoB,aAzHpB;AAAA,EA0HA,0BAA2B,qEA1H3B;AAAA,EA2HA,qBAAqB,eA3HrB;CAFJ;;;;ACAA,MAAM,CAAC,OAAP,GACI;AAAA,QAAK,GAAL;AAAA,EACA,QAAS,YADT;AAAA,EAEA,sBAAuB,gBAFvB;AAAA,EAGA,UAAW,QAHX;AAAA,EAIA,YAAa,WAJb;AAAA,EAKA,QAAS,QALT;AAAA,EAMA,gBAAiB,qBANjB;AAAA,EAOA,oCAAqC,mCAPrC;AAAA,EAQA,kBAAmB,QARnB;AAAA,EASA,mBAAoB,SATpB;AAAA,EAUA,kBAAmB,SAVnB;AAAA,EAWA,OAAQ,OAXR;AAAA,EAYA,WAAY,SAZZ;AAAA,EAaA,UAAW,SAbX;AAAA,EAcA,UAAW,QAdX;AAAA,EAeA,oCAAqC,6BAfrC;AAAA,EAgBA,8BAA+B,sBAhB/B;AAAA,EAiBA,yBAA0B,uBAjB1B;AAAA,EAkBA,wBAAyB,sBAlBzB;AAAA,EAmBA,wBAAyB,uBAnBzB;AAAA,EAoBA,qBAAsB,SApBtB;AAAA,EAqBA,QAAS,KArBT;AAAA,EAsBA,2BAA4B,cAtB5B;AAAA,EAuBA,yBAAwB,gCAvBxB;AAAA,EAwBA,mBAAmB,kBAxBnB;AAAA,EAyBA,uBAAuB,oBAzBvB;AAAA,EA0BA,2BAA2B,uBA1B3B;AAAA,EA2BA,eAAe,mBA3Bf;AAAA,EA4BA,eAAe,mBA5Bf;AAAA,EA6BA,aAAa,kBA7Bb;AAAA,EA8BA,uBAAuB,qBA9BvB;AAAA,EA+BA,OAAO,QA/BP;AAAA,EAgCA,UAAU,QAhCV;AAAA,EAiCA,mCAAmC,kDAjCnC;AAAA,EAmCA,uCAAuC,gEAnCvC;AAAA,EAuCA,sBAAqB,oEAvCrB;AAAA,EA0CA,mBAAkB,qEA1ClB;AAAA,EA8CA,sBAAsB,iFA9CtB;AAAA,EAmDA,yCAAwC,6BAnDxC;AAAA,EAsDA,sBAAsB,0BAtDtB;AAAA,EAwDA,MAAM,OAxDN;AAAA,EAyDA,MAAM,SAzDN;AAAA,EA0DA,MAAM,OA1DN;AAAA,EA2DA,MAAM,OA3DN;AAAA,EA4DA,MAAM,MA5DN;AAAA,EA6DA,MAAM,OA7DN;AAAA,EA8DA,MAAM,OA9DN;AAAA,EA+DA,MAAM,QA/DN;AAAA,EAgEA,MAAM,YAhEN;AAAA,EAiEA,MAAM,SAjEN;AAAA,EAkEA,MAAM,WAlEN;AAAA,EAmEA,MAAM,WAnEN;AAAA,EAqEA,UAAW,QArEX;AAAA,EAsEA,mBAAoB,0DAtEpB;AAAA,EAuEA,WAAY,UAvEZ;AAAA,EAwEA,kBAAmB,aAxEnB;AAAA,EAyEA,kCAAmC,0CAzEnC;AAAA,EA0EA,iCAAkC,mCA1ElC;AAAA,EA2EA,gCAAiC,6CA3EjC;AAAA,EA4EA,gCAA+B,gDA5E/B;AAAA,EA6EA,gCAAoC,0JA7EpC;AAAA,EAgFA,oBAAqB,gBAhFrB;AAAA,EAiFA,cAAc,WAjFd;AAAA,EAkFA,cAAc,YAlFd;AAAA,EAmFA,YAAY,IAnFZ;AAAA,EAoFA,gBAAgB,QApFhB;AAAA,EAqFA,eAAe,OArFf;AAAA,EAsFA,oBAAqB,wFAtFrB;AAAA,EAuFA,UAAW,SAvFX;AAAA,EAwFA,WAAY,SAxFZ;AAAA,EAyFA,UAAW,YAzFX;AAAA,EA0FA,SAAU,WA1FV;AAAA,EA2FA,QAAS,SA3FT;AAAA,EA4FA,YAAa,eA5Fb;AAAA,EA6FA,uBAAwB,qBA7FxB;AAAA,EA8FA,WAAY,WA9FZ;AAAA,EA+FA,UAAW,oBA/FX;AAAA,EAgGA,WAAY,WAhGZ;AAAA,EAiGA,oBAAoB,6DAjGpB;AAAA,EAmGA,sBAAuB,+EAnGvB;AAAA,EAqGA,cAAc,UArGd;AAAA,EAsGA,aAAa,IAtGb;AAAA,EAuGA,QAAQ,cAvGR;AAAA,EAwGA,gBAAgB,uBAxGhB;AAAA,EAyGA,iBAAiB,sCAzGjB;AAAA,EA0GA,iBAAiB,+BA1GjB;AAAA,EA2GA,wBAAwB,mDA3GxB;AAAA,EA6GA,gBAAiB,iGA7GjB;AAAA,EAgHA,mBAAmB,sDAhHnB;AAAA,EAiHA,OAAQ,IAjHR;AAAA,EAkHA,MAAO,IAlHP;AAAA,EAmHA,WAAW,iBAnHX;AAAA,EAoHA,sBAAsB,yCApHtB;AAAA,EAqHA,8CAA8C,8CArH9C;AAAA,EAsHA,iBAAkB,cAtHlB;AAAA,EAuHA,mBAAoB,kCAvHpB;AAAA,EAwHA,kBAAoB,mEAxHpB;AAAA,EAyHA,YAAa,QAzHb;AAAA,EA0HA,0BAA2B,+FA1H3B;AAAA,EA2HA,qBAAqB,cA3HrB;CADJ;;;;ACAA,MAAM,CAAC,OAAP,GAEI;AAAA,QAAM,IAAN;AAAA,EACA,QAAS,QADT;AAAA,EAEA,sBAAuB,uBAFvB;AAAA,EAGA,UAAW,WAHX;AAAA,EAIA,YAAa,aAJb;AAAA,EAKA,QAAS,UALT;AAAA,EAMA,gBAAiB,aANjB;AAAA,EAOA,qCAAsC,wCAPtC;AAAA,EAQA,kBAAmB,QARnB;AAAA,EASA,mBAAoB,OATpB;AAAA,EAUA,kBAAmB,QAVnB;AAAA,EAWA,OAAQ,SAXR;AAAA,EAYA,WAAY,OAZZ;AAAA,EAaA,UAAW,QAbX;AAAA,EAcA,UAAW,QAdX;AAAA,EAeA,oCAAqC,8BAfrC;AAAA,EAgBA,8BAA+B,sBAhB/B;AAAA,EAiBA,yBAA0B,qBAjB1B;AAAA,EAkBA,wBAAyB,sBAlBzB;AAAA,EAmBA,wBAAyB,sBAnBzB;AAAA,EAoBA,qBAAsB,UApBtB;AAAA,EAqBA,2BAA4B,gBArB5B;AAAA,EAsBA,QAAS,MAtBT;AAAA,EAuBA,yBAAwB,4BAvBxB;AAAA,EAwBA,mBAAmB,qBAxBnB;AAAA,EAyBA,uBAAuB,mBAzBvB;AAAA,EA0BA,4BAA4B,0BA1B5B;AAAA,EA2BA,eAAe,kBA3Bf;AAAA,EA4BA,eAAe,oBA5Bf;AAAA,EA6BA,aAAa,cA7Bb;AAAA,EA8BA,uBAAuB,qBA9BvB;AAAA,EA+BA,OAAO,SA/BP;AAAA,EAgCA,UAAU,SAhCV;AAAA,EAiCA,mCAAmC,kDAjCnC;AAAA,EAmCA,uCAAuC,+EAnCvC;AAAA,EAuCA,sBAAqB,mEAvCrB;AAAA,EA0CA,mBAAkB,6DA1ClB;AAAA,EA8CA,sBAAsB,sFA9CtB;AAAA,EAmDA,8CAA+C,8CAnD/C;AAAA,EAuDA,sBAAsB,yBAvDtB;AAAA,EAyDA,MAAM,SAzDN;AAAA,EA0DA,MAAM,SA1DN;AAAA,EA2DA,MAAM,MA3DN;AAAA,EA4DA,MAAM,OA5DN;AAAA,EA6DA,MAAM,KA7DN;AAAA,EA8DA,MAAM,MA9DN;AAAA,EA+DA,MAAM,SA/DN;AAAA,EAgEA,MAAM,MAhEN;AAAA,EAiEA,MAAM,WAjEN;AAAA,EAkEA,MAAM,SAlEN;AAAA,EAmEA,MAAM,UAnEN;AAAA,EAoEA,MAAM,UApEN;AAAA,EAsEA,oBAAqB,4EAtErB;AAAA,EAuEA,UAAW,SAvEX;AAAA,EAwEA,mBAAoB,0DAxEpB;AAAA,EAyEA,WAAY,SAzEZ;AAAA,EA0EA,kBAAmB,WA1EnB;AAAA,EA2EA,kCAAmC,8CA3EnC;AAAA,EA4EA,iCAAkC,uCA5ElC;AAAA,EA6EA,gCAAoC,yCA7EpC;AAAA,EA8EA,gCAAoC,mJA9EpC;AAAA,EAgFA,oBAAoC,6CAhFpC;AAAA,EAiFA,oBAAqB,0BAjFrB;AAAA,EAkFA,cAAc,SAlFd;AAAA,EAmFA,cAAc,WAnFd;AAAA,EAoFA,YAAY,IApFZ;AAAA,EAqFA,gBAAgB,SArFhB;AAAA,EAsFA,eAAe,QAtFf;AAAA,EAuFA,oBAAqB,2EAvFrB;AAAA,EAwFA,UAAW,QAxFX;AAAA,EAyFA,WAAY,OAzFZ;AAAA,EA0FA,UAAW,SA1FX;AAAA,EA2FA,SAAU,UA3FV;AAAA,EA4FA,QAAS,aA5FT;AAAA,EA6FA,YAAa,cA7Fb;AAAA,EA8FA,WAAY,SA9FZ;AAAA,EA+FA,UAAW,wBA/FX;AAAA,EAgGA,uBAAwB,uCAhGxB;AAAA,EAiGA,iBAAkB,2DAjGlB;AAAA,EAkGA,WAAY,WAlGZ;AAAA,EAmGA,oBAAqB,gEAnGrB;AAAA,EAsGA,sBAAuB,2FAtGvB;AAAA,EAyGA,cAAe,QAzGf;AAAA,EA0GA,aAAc,IA1Gd;AAAA,EA2GA,QAAS,OA3GT;AAAA,EA4GA,KAAM,gBA5GN;AAAA,EA6GA,gBAAiB,qBA7GjB;AAAA,EA8GA,iBAAkB,2CA9GlB;AAAA,EA+GA,iBAAkB,mCA/GlB;AAAA,EAgHA,wBAAoC,4DAhHpC;AAAA,EAkHA,gBAAiB,wGAlHjB;AAAA,EAsHA,mBAAmB,2EAtHnB;AAAA,EAuHA,OAAQ,KAvHR;AAAA,EAwHA,MAAO,KAxHP;AAAA,EAyHA,WAAW,mBAzHX;AAAA,EA0HA,sBAAsB,6CA1HtB;AAAA,EA2HA,8CAA8C,0CA3H9C;AAAA,EA4HA,iBAAoB,yBA5HpB;AAAA,EA6HA,mBAAoB,yBA7HpB;AAAA,EA8HA,kBAAoB,sGA9HpB;AAAA,EA+HA,YAAoB,aA/HpB;AAAA,EAgIA,0BAA2B,sGAhI3B;AAAA,EAiIA,qBAAqB,eAjIrB;CAFJ;;;;ACAA;EAAA;iSAAA;;AAAA,kBAAkB,QAAQ,mBAAR,CAAlB;;AAAA,MACA,GAAS,QAAQ,eAAR,CADT;;AAAA,MAQM,CAAC,OAAP,GAAuB;AAEnB;;AAAA,4BAAS,QAAT;;AAAA,kBAEA,WAAU;WACN;AAAA,aAAO,EAAP;AAAA,MACA,aAAa,EADb;AAAA,MAEA,WAAW,EAFX;AAAA,MAGA,UAAU,kBAHV;AAAA,MAIA,aAAa,CAJb;AAAA,MAKA,SAAS,IALT;MADM;EAAA,CAFV;;AAAA,kBAUA,MAAK;WAAG,6CAAQ,GAAG,CAAC,OAAf;EAAA,CAVL;;AAYa;AACT,QAAC,OAAD,GAAc,qBAAd;AACA,WAAO,kDAAP,CAFS;EAAA,CAZb;;AAAA,kBAiBA,QAAO,SAAC,KAAD;AAEH;AAAA,6CAAe,CAAE,gBAAd,GAAuB,CAA1B;AACI,UAAC,OAAM,CAAC,KAAR,CAAc,KAAK,CAAC,MAApB,EAA4B;AAAA,eAAO,IAAP;OAA5B,EADJ;KAAA;AAAA,IAEA,YAAY,CAAC,MAFb;AAKA,QAAG,KAAK,CAAC,YAAN,IAAuB,KAAK,CAAC,YAAN,KAAwB,MAAlD;AACI,WAAK,CAAC,KAAN,GAAc,KAAK,CAAC,YAApB;AAAA,MACA,KAAK,CAAC,QAAN,GAAkB,mBAAe,KAAK,CAAC,YAArB,GAAmC,MADrD;AAEA,UAAG,0IAAH;AACI,aAAK,CAAC,WAAN,GACI,IAAC,OAAM,CAAC,KAAM,MAAK,CAAC,YAAN,CAAmB,CAAC,UAAU,CAAC,WADjD,CADJ;OAHJ;KALA;AAYA,QAAG,KAAK,CAAC,SAAN,KAAmB,QAAtB;AACI,WAAK,CAAC,SAAN,GAAkB,QAAlB,CADJ;KAZA;AAeA,QAAG,KAAK,CAAC,SAAN,KAAmB,SAAtB;AACI,WAAK,CAAC,SAAN,GAAkB,EAAlB,CADJ;KAfA;AAkBA,WAAO,KAAP,CApBG;EAAA,CAjBP;;AAAA,kBAwCA,cAAa;AACT;AAAA,mBAAe,IAAC,IAAD,CAAK,cAAL,CAAf;AACA,QAAG,oBAAH;AACI,iBAAY,mBAAe,KAAC,IAAD,CAAK,cAAL,EAAf,GAAoC,MAAhD,CADJ;KAAA;AAGI,iBAAW,kBAAX,CAHJ;KADA;AAKA,WAAO,WAAW,GAAG,CAAC,MAAtB,CANS;EAAA,CAxCb;;AAAA,kBAgDA,eAAc,SAAC,GAAD;AACV;AAAA,aAAY,GAAH,GAAa,UAAM,GAAnB,GAA+B,EAAxC;WACA,KAAE,MAAM,CAAC,QAAQ,CAAC,MAAlB,GAA0B,iBAA1B,GAA0C,MAA1C,GAAkD,UAAlD,GAA2D,IAAC,IAFlD;EAAA,CAhDd;;AAAA,kBAqDA,WAAU,SAAC,GAAD,EAAM,KAAN,EAAa,QAAb;AACN;AAAA,WACI;AAAA,WAAK,GAAL;AAAA,MACA,OAAO,KADP;KADJ;WAGA,MAAM,CAAC,IAAP,CAAY,cAAZ,EAA4B,IAA5B,EAAkC,QAAlC,EAJM;EAAA,CArDV;;eAAA;;GAFiC,QAAQ,CAAC,MAR9C;;;;ACAA;EAAA;iSAAA;;AAAA,SAAS,QAAQ,eAAR,CAAT;;AAAA,MAIM,CAAC,OAAP,GAAuB;AAEnB;;;;GAAA;;AAAA,6BAAU;WACN;AAAA,gBAAU,iBAAV;AAAA,MACA,KAAK,EADL;AAAA,MAEA,aAAa,CAFb;MADM;EAAA,CAAV;;AAAA,kBAKA,MAAK;WACD,6CAAQ,GAAG,CAAC,OADX;EAAA,CALL;;AAAA,kBASA,QAAO,SAAC,KAAD;AACH,QAAG,MAAS,CAAC,EAAb;aAAqB,MAArB;KAAA;aACK,CAAC,CAAC,MAAF,CAAS,KAAT,EACD;AAAA,kBAAU,CAAC,mBAAe,KAAK,CAAC,EAArB,GAAyB,MAA1B,IAAkC,GAAG,CAAC,MAAhD;AAAA,QACA,KAAK,CAAC,YAAQ,KAAK,CAAC,EAAd,GAAkB,MAAnB,IAA2B,GAAG,CAAC,MADpC;AAAA,QAEA,aAAa,KAAK,CAAC,WAFnB;OADC,EADL;KADG;EAAA,CATP;;AAAA,kBAiBA,aAAY;WACP,YAAQ,KAAC,IAAD,CAAK,IAAL,EAAR,GAAmB,OADZ;EAAA,CAjBZ;;eAAA;;GAFiC,QAAQ,CAAC,MAJ9C;;AAAA,KA0BK,CAAC,aAAN,GAAsB,SAAC,IAAD,EAAO,QAAP;SAClB,MAAM,CAAC,GAAP,CAAY,WAAO,IAAnB,EAA4B,QAA5B,EADkB;AAAA,CA1BtB;;AAAA,KA6BK,CAAC,YAAN,GAAqB,SAAC,MAAD,EAAS,IAAT,EAAe,QAAf;SACjB,MAAM,CAAC,IAAP,CAAa,WAAO,MAAP,GAAe,UAA5B,EAAuC,IAAvC,EAA6C,QAA7C,EADiB;AAAA,CA7BrB;;;;ACEA;;AAAA,WAAW,SAAC,KAAD,EAAQ,IAAR;AACP;AAAA,MAAG,KAAK,CAAC,IAAI,CAAC,IAAX,GAAkB,KAAK,IAAL,GAAY,IAAjC;AACI,WAAO,KAAK,EAAE,uBAAF,CAAL,CAAP,CADJ;GAAA;AAGA,MAAG,MAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAhB,CAAsB,WAAtB,CAAP;AACI,WAAO,KAAK,EAAE,iBAAF,CAAL,CAAP,CADJ;GAHA;AAAA,EAMA,SAAa,gBANb;AAAA,EAOA,KAAK,CAAC,GAAN,GAAgB,WAPhB;AAAA,EASA,MAAM,CAAC,aAAP,CAAqB,KAAK,CAAC,IAA3B,CATA;SAUA,MAAM,CAAC,SAAP,GAAmB;WAAA;AACf,WAAK,CAAC,GAAG,CAAC,GAAV,GAAgB,MAAM,CAAC,MAAvB;AAAA,MACA,KAAK,CAAC,GAAG,CAAC,WAAV,GAAwB,KAAK,CAAC,UAAU,CAAC,WADzC;aAEA,KAAK,CAAC,GAAG,CAAC,MAAV,GAAmB;eACf,OADe;MAAA,EAHJ;IAAA;EAAA,SAXZ;AAAA,CAAX;;AAAA,MAoBA,GAAS,SAAC,KAAD,EAAQ,SAAR,EAAmB,UAAnB,EAA+B,IAA/B;AAEL;AAAA,QAAM;AAAA,WAAO,SAAP;AAAA,IAAkB,QAAQ,UAA1B;GAAN;AACA,MAAG,CAAC,KAAK,CAAC,GAAG,CAAC,KAAV,GAAkB,KAAK,CAAC,GAAG,CAAC,MAA7B,MAAwC,IAA3C;AACI,eAAW,QAAX,CADJ;GAAA;AAGI,eAAW,OAAX,CAHJ;GADA;AAAA,EAMA,QAAQ,GAAI,UAAJ,GAAgB,KAAK,CAAC,GAAI,UANlC;AAAA,EAQA,UACI;AAAA,YAAQ,QAAQ,KAAK,CAAC,GAAG,CAAC,MAA1B;AAAA,IACA,OAAO,QAAQ,KAAK,CAAC,GAAG,CAAC,KADzB;GATJ;AAAA,EAaA,SAAS,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAbT;AAAA,EAcA,MAAM,CAAC,KAAP,GAAmB,IAAH,GAAa,SAAb,GAA6B,OAAO,CAAC,KAdrD;AAAA,EAeA,MAAM,CAAC,MAAP,GAAmB,IAAH,GAAa,UAAb,GAA6B,OAAO,CAAC,MAfrD;AAAA,EAgBA,MAAM,MAAM,CAAC,UAAP,CAAkB,IAAlB,CAhBN;AAAA,EAiBA,GAAG,CAAC,SAAJ,CAAc,KAAK,CAAC,GAApB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,OAAO,CAAC,KAAvC,EAA8C,OAAO,CAAC,MAAtD,CAjBA;AAkBA,SAAO,MAAM,CAAC,SAAP,CAAiB,KAAK,CAAC,IAAI,CAAC,IAA5B,CAAP,CApBK;AAAA,CApBT;;AAAA,OA4CA,GAAU,SAAC,OAAD,EAAU,IAAV;AACN;AAAA,WAAS,KAAK,OAAO,CAAC,KAAR,CAAc,GAAd,CAAmB,GAAxB,CAAT;AAAA,EACA,QAAQ,EADR;AAEA,OAAS,kGAAT;AACI,SAAK,CAAC,IAAN,CAAW,MAAM,CAAC,UAAP,CAAkB,CAAlB,CAAX,EADJ;AAAA,GAFA;AAIA,SAAW,SAAK,CAAK,eAAW,KAAX,CAAL,CAAL,EAA8B;AAAA,UAAM,IAAN;GAA9B,CAAX,CALM;AAAA,CA5CV;;AAAA,gBAqDA,GAAmB,SAAC,KAAD,EAAQ,IAAR;AACf,OAAK,CAAC,QAAN,GAAiB,OAAO,KAAP,EAAc,GAAd,EAAmB,GAAnB,EAAwB,IAAxB,CAAjB;AAAA,EAEA,KAAK,CAAC,OAAN,CAAc,SAAd,CAFA;SAGA,OAJe;AAAA,CArDnB;;AAAA,iBA6DA,GAAoB,SAAC,KAAD,EAAQ,IAAR;AAChB,OAAK,CAAC,SAAN,GAAkB,OAAO,KAAP,EAAc,IAAd,EAAoB,GAApB,EAAyB,KAAzB,CAAlB;SACA,OAFgB;AAAA,CA7DpB;;AAAA,cAmEA,GAAiB,SAAC,KAAD,EAAQ,IAAR;AACb,OAAK,CAAC,KAAN,GAAc,QAAQ,KAAK,CAAC,QAAd,EAAwB,KAAK,CAAC,IAAI,CAAC,IAAnC,CAAd;SACA,OAFa;AAAA,CAnEjB;;AAAA,aAyEA,GAAgB,SAAC,KAAD,EAAQ,IAAR;AACZ,OAAK,CAAC,MAAN,GAAe,QAAQ,KAAK,CAAC,SAAd,EAAyB,KAAK,CAAC,IAAI,CAAC,IAApC,CAAf;SACA,OAFY;AAAA,CAzEhB;;AAAA,MAgFA,GAAS,SAAC,KAAD,EAAQ,IAAR;AACL;AAAA,aAAe,cAAf;AACA;AAAA;oBAAA;AACI,YAAQ,CAAC,MAAT,CAAgB,IAAhB,EAAsB,KAAK,CAAC,GAAN,CAAU,IAAV,CAAtB,EADJ;AAAA,GADA;AAAA,EAIA,QAAQ,CAAC,MAAT,CAAgB,KAAhB,EAAuB,KAAK,CAAC,IAA7B,CAJA;AAAA,EAKA,QAAQ,CAAC,MAAT,CAAgB,OAAhB,EAAyB,KAAK,CAAC,KAA/B,EAAuC,WAAO,KAAK,CAAC,IAAI,CAAC,IAAzD,CALA;AAAA,EAMA,QAAQ,CAAC,MAAT,CAAgB,QAAhB,EAA0B,KAAK,CAAC,MAAhC,EAAyC,YAAQ,KAAK,CAAC,IAAI,CAAC,IAA5D,CANA;SASA,QAAQ,CAAC,IAAT,CAAc,QAAd,EAAwB,KAAxB,EACI;AAAA,iBAAa,KAAb;AAAA,IACA,MAAM,QADN;AAAA,IAEA,SAAS,SAAC,IAAD;AACL,WAAK,CAAC,GAAN,CAAU,KAAK,CAAC,KAAN,CAAY,IAAZ,CAAV,EAA6B;AAAA,gBAAQ,IAAR;OAA7B;aACA,OAFK;IAAA,CAFT;AAAA,IAKA,OAAO;aACH,KAAK,EAAE,mBAAF,CAAL,EADG;IAAA,CALP;AAAA,IAOA,KAAK;AACD;AAAA,YAAM,CAAC,CAAC,YAAY,CAAC,GAAf,EAAN;AAAA,MACA,WAAW,SAAC,CAAD;eAAO,KAAK,CAAC,OAAN,CAAc,UAAd,EAA0B,CAA1B,EAAP;MAAA,CADX;AAGA,UAAG,eAAe,MAAM,CAAC,cAAzB;AACI,WAAG,CAAC,gBAAJ,CAAqB,UAArB,EAAiC,QAAjC,EAA2C,KAA3C,EADJ;OAHA;AAKA,UAAG,GAAG,CAAC,MAAP;AACI,WAAG,CAAC,MAAM,CAAC,gBAAX,CAA4B,UAA5B,EAAwC,QAAxC,EAAkD,KAAlD,EADJ;OALA;aAOA,IARC;IAAA,CAPL;GADJ,EAVK;AAAA,CAhFT;;AAAA,YA8GA,GAAe,SAAC,KAAD,EAAQ,IAAR;SACX,KAAK,CAAC,SAAN,CAAgB;IACZ,SAAC,EAAD;aAAQ,SAAkB,KAAlB,EAAyB,EAAzB,EAAR;IAAA,CADY,EAEZ,SAAC,EAAD;aAAQ,iBAAiB,KAAjB,EAAwB,EAAxB,EAAR;IAAA,CAFY,EAGZ,SAAC,EAAD;aAAQ,kBAAkB,KAAlB,EAAyB,EAAzB,EAAR;IAAA,CAHY,EAIZ,SAAC,EAAD;aAAQ,eAAkB,KAAlB,EAAyB,EAAzB,EAAR;IAAA,CAJY,EAKZ,SAAC,EAAD;aAAQ,cAAkB,KAAlB,EAAyB,EAAzB,EAAR;IAAA,CALY,EAMZ,SAAC,EAAD;aAAQ,OAAkB,KAAlB,EAAyB,EAAzB,EAAR;IAAA,CANY,EAOZ,SAAC,EAAD;AAGI,kBAAY,CAAC,IAAb;AAAA,MACA,YAAY,CAAC,GADb;AAAA,MAEA,YAAY,CAAC,KAFb;AAAA,MAGA,YAAY,CAAC,QAHb;AAAA,MAIA,YAAY,CAAC,KAJb;AAAA,MAKA,YAAY,CAAC,SALb;aAMA,WAAW,EAAX,EAAe,GAAf,EATJ;IAAA,CAPY;GAAhB,EAiBG,SAAC,GAAD;AACC,QAAG,GAAH;AACI,WAAK,CAAC,OAAN,CAAc,SAAd,EAAyB,GAAzB,EADJ;KAAA;AAGI,WAAK,CAAC,OAAN,CAAc,gBAAd,EAHJ;KAAA;WAKA,KAAK,GAAL,EAND;EAAA,CAjBH,EADW;AAAA,CA9Gf;;AAAA;8BA4II;;AAAA,yCAAa,KAAK,CAAC,KAAN,CAAY,YAAZ,EAA0B,CAA1B,CAAb;;AAAA,2BAEA,UAAS,SAAC,KAAD;WACL,IAAC,YAAW,CAAC,IAAb,CAAkB,KAAlB,EAAyB;aAAA,SAAC,GAAD;AACpB,YAA0B,GAA1B;AAAA,iBAAO,OAAO,CAAC,GAAR,CAAY,GAAZ,CAAP;SADoB;MAAA;IAAA,QAAzB,EADK;EAAA,CAFT;;wBAAA;;IA5IJ;;AAAA,MAkJM,CAAC,OAAP,GAAqB,oBAlJrB;;;;ACDA;;AAAA,WAAW,SAAC,KAAD,EAAQ,IAAR;AAEP,OAAK,CAAC,GAAN,GAAgB,WAAhB;AAAA,EACA,KAAK,CAAC,GAAG,CAAC,MAAV,GAAmB;WACf,OADe;EAAA,CADnB;SAGA,KAAK,CAAC,GAAG,CAAC,GAAV,GAAgB,KAAK,CAAC,IALf;AAAA,CAAX;;AAAA,MAUA,GAAS,SAAC,KAAD,EAAQ,SAAR,EAAmB,UAAnB,EAA+B,IAA/B;AAEL;AAAA,QAAM;AAAA,WAAO,SAAP;AAAA,IAAkB,QAAQ,UAA1B;GAAN;AACA,MAAG,CAAC,KAAK,CAAC,GAAG,CAAC,KAAV,GAAkB,KAAK,CAAC,GAAG,CAAC,MAA7B,MAAwC,IAA3C;AACI,eAAW,QAAX,CADJ;GAAA;AAGI,eAAW,OAAX,CAHJ;GADA;AAAA,EAMA,QAAQ,GAAI,UAAJ,GAAgB,KAAK,CAAC,GAAI,UANlC;AAAA,EAQA,UACI;AAAA,YAAQ,QAAQ,KAAK,CAAC,GAAG,CAAC,MAA1B;AAAA,IACA,OAAO,QAAQ,KAAK,CAAC,GAAG,CAAC,KADzB;GATJ;AAAA,EAaA,SAAS,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAbT;AAAA,EAcA,MAAM,CAAC,KAAP,GAAmB,IAAH,GAAa,SAAb,GAA6B,OAAO,CAAC,KAdrD;AAAA,EAeA,MAAM,CAAC,MAAP,GAAmB,IAAH,GAAa,UAAb,GAA6B,OAAO,CAAC,MAfrD;AAAA,EAgBA,MAAM,MAAM,CAAC,UAAP,CAAkB,IAAlB,CAhBN;AAAA,EAiBA,GAAG,CAAC,SAAJ,CAAc,KAAK,CAAC,GAApB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,OAAO,CAAC,KAAvC,EAA8C,OAAO,CAAC,MAAtD,CAjBA;AAkBA,SAAO,MAAM,CAAC,SAAP,CAAiB,KAAK,CAAC,IAAI,CAAC,IAA5B,CAAP,CApBK;AAAA,CAVT;;AAAA,OAiCA,GAAU,SAAC,OAAD,EAAU,IAAV;AACN;AAAA,WAAS,KAAK,OAAO,CAAC,KAAR,CAAc,GAAd,CAAmB,GAAxB,CAAT;AAAA,EACA,QAAQ,EADR;AAEA,OAAS,kGAAT;AACI,SAAK,CAAC,IAAN,CAAW,MAAM,CAAC,UAAP,CAAkB,CAAlB,CAAX,EADJ;AAAA,GAFA;AAIA,SAAW,SAAK,CAAK,eAAW,KAAX,CAAL,CAAL,EAA8B;AAAA,UAAM,IAAN;GAA9B,CAAX,CALM;AAAA,CAjCV;;AAAA,gBA0CA,GAAmB,SAAC,KAAD,EAAQ,IAAR;AACf,OAAK,CAAC,QAAN,GAAiB,OAAO,KAAP,EAAc,GAAd,EAAmB,GAAnB,EAAwB,IAAxB,CAAjB;SACA,WAAW,IAAX,EAAiB,CAAjB,EAFe;AAAA,CA1CnB;;AAAA,aA+CA,GAAgB,SAAC,KAAD,EAAQ,IAAR;AACZ,OAAK,CAAC,KAAN,GAAc,QAAQ,KAAK,CAAC,QAAd,EAAwB,KAAK,CAAC,IAAI,CAAC,IAAnC,CAAd;SACA,WAAW,IAAX,EAAiB,CAAjB,EAFY;AAAA,CA/ChB;;AAAA,MAsDA,GAAS,SAAC,KAAD,EAAQ,IAAR;AACL;AAAA,aAAe,cAAf;AAAA,EACA,QAAQ,CAAC,MAAT,CAAgB,OAAhB,EAAyB,KAAK,CAAC,KAA/B,EAAuC,WAAO,KAAK,CAAC,IAAI,CAAC,IAAzD,CADA;SAEA,CAAC,CAAC,IAAF,CACI;AAAA,SAAM,mBAAe,KAAK,CAAC,EAArB,GAAyB,MAA/B;AAAA,IACA,MAAM,QADN;AAAA,IAEA,OAAO,KAFP;AAAA,IAGA,aAAa,KAHb;AAAA,IAIA,aAAa,KAJb;AAAA,IAKA,MAAM,KALN;AAAA,IAMA,SAAS,SAAC,IAAD;aACL,EAAE,aAAF,CAAgB,CAAC,MAAjB,CAAyB,QAAI,KAAK,CAAC,IAAI,CAAC,IAAf,GAAqB,qBAA9C,EADK;IAAA,CANT;GADJ,EAHK;AAAA,CAtDT;;AAAA,YAsEA,GAAe,SAAC,KAAD,EAAQ,IAAR;SACX,KAAK,CAAC,SAAN,CAAgB;IACZ,SAAC,EAAD;aAAQ,SAAkB,KAAlB,EAAyB,EAAzB,EAAR;IAAA,CADY,EAEZ,SAAC,EAAD;aAAQ,iBAAiB,KAAjB,EAAwB,EAAxB,EAAR;IAAA,CAFY,EAGZ,SAAC,EAAD;aAAQ,cAAkB,KAAlB,EAAyB,EAAzB,EAAR;IAAA,CAHY,EAIZ,SAAC,EAAD;aAAQ,OAAkB,KAAlB,EAAyB,EAAzB,EAAR;IAAA,CAJY,EAKZ,SAAC,EAAD;AACI,kBAAY,CAAC,GAAb;AAAA,MACA,YAAY,CAAC,KADb;AAAA,MAEA,YAAY,CAAC,QAFb;aAGA,KAJJ;IAAA,CALY;GAAhB,EAUG,SAAC,GAAD;WACC,KAAK,GAAL,EADD;EAAA,CAVH,EADW;AAAA,CAtEf;;AAAA;8BAwFI;;AAAA,yCAAa,KAAK,CAAC,KAAN,CAAY,YAAZ,EAA0B,CAA1B,CAAb;;AAAA,2BAEA,UAAS,SAAC,KAAD;AAEL;AAAA,YACI;AAAA,WAAK,KAAK,CAAC,UAAN,EAAL;AAAA,MACA,IAAI,KAAK,CAAC,GAAN,CAAU,IAAV,CADJ;AAAA,MAEA,MACI;AAAA,cAAM,YAAN;AAAA,QACA,MAAM,KAAK,CAAC,GAAN,CAAU,OAAV,CADN;OAHJ;KADJ;WAWA,aAAa,KAAb,EAAoB,SAAC,GAAD;AAChB,UAAmB,GAAnB;eAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;OADgB;IAAA,CAApB,EAbK;EAAA,CAFT;;wBAAA;;IAxFJ;;AAAA,MA2GM,CAAC,OAAP,GAAqB,oBA3GrB;;;;ACDA;EAAA;;iSAAA;;AAAA,MAAiB,QAAQ,aAAR,CAAjB;;AAAA,cACA,GAAiB,QAAQ,kBAAR,CADjB;;AAAA,SAEA,GAAiB,QAAQ,aAAR,CAFjB;;AAAA,KAGA,GAAiB,QAAQ,cAAR,CAHjB;;AAAA,MAKM,CAAC,OAAP,GAAuB;AACnB;;;;;;;GAAA;;AAAA,4BACI;AAAA,QAAwB,YAAxB;AAAA,IACA,UAAwB,YADxB;AAAA,IAEA,eAAwB,gBAFxB;AAAA,IAGA,cAAwB,UAHxB;AAAA,IAIA,mBAAwB,OAJxB;AAAA,IAKA,wBAAwB,WALxB;AAAA,IAMA,kCAAkC,OANlC;AAAA,IAOA,uCAAuC,WAPvC;GADJ;;AAAA,mBAWA,aAAY,SAAC,QAAD;;MAAC,WAAS;KAClB;WAAA,IAAC,YAAD,CAAiB,mBACb;AAAA,kBAAY,GAAG,CAAC,MAAM,CAAC,IAAX,EAAZ;AAAA,MACA,UAAU,QADV;KADa,CAAjB,EADQ;EAAA,CAXZ;;AAAA,mBAiBA,iBAAgB;AACZ,QAAmC,GAAG,CAAC,IAAJ,KAAY,QAA/C;AAAA,aAAO,IAAC,SAAD,CAAU,QAAV,EAAoB,IAApB,CAAP;KAAA;WACA,IAAC,WAAD,CAAY,IAAZ,EAFY;EAAA,CAjBhB;;AAAA,mBAuBA,QAAO,SAAC,EAAD,EAAK,QAAL,EAAqB,QAArB;AACH;;MADQ,WAAS;KACjB;AAAA,8EAAmB,CAAE,GAAlB,CAAsB,IAAtB,yBAA+B,EAAlC;AAEI,UAAG,QAAH;AACI,YAAC,SAAQ,CAAC,YAAV,GADJ;OAAA;AAGI,YAAC,SAAQ,CAAC,eAAV,GAHJ;OAAA;AAKA,UAAG,QAAH;eACI,WADJ;OAAA;eAGI,IAAC,SAAQ,CAAC,YAAV,GAHJ;OAPJ;KAAA;AAaI,cAAQ,GAAG,CAAC,MAAM,CAAC,GAAX,CAAe,EAAf,KAA0B,UAAM;AAAA,YAAI,EAAJ;OAAN,CAAlC;aACA,KAAK,CAAC,KAAN,EACI,CAAC,IADL,CACU;eAAA;AACF,eAAC,YAAD,CAAiB,cACb;AAAA,mBAAO,KAAP;AAAA,YACA,UAAU,QADV;WADa,CAAjB;AAIA,cAAG,QAAH;mBACI,WADJ;WAAA;mBAGI,KAAC,SAAQ,CAAC,YAAV,GAHJ;WALE;QAAA;MAAA,QADV,CAWI,CAAC,IAXL,CAWU;eAAA;AACF,gBAAM,EAAE,2BAAF,CAAN;iBACA,KAAC,SAAD,CAAU,QAAV,EAAoB,IAApB,EAFE;QAAA;MAAA,QAXV,EAdJ;KADG;EAAA,CAvBP;;AAAA,mBAuDA,QAAO,SAAC,OAAD,EAAU,OAAV;WACH,IAAC,MAAD,CAAO,OAAP,EAAgB,KAAhB,EAAuB;aAAA;eACnB,KAAC,SAAQ,CAAC,SAAV,CAAoB,OAApB,EADmB;MAAA;IAAA,QAAvB,EADG;EAAA,CAvDP;;AAAA,mBA6DA,YAAW,SAAC,OAAD,EAAU,OAAV;WACP,IAAC,MAAD,CAAO,OAAP,EAAgB,IAAhB,EAAsB;aAAA;eAClB,KAAC,SAAQ,CAAC,SAAV,CAAoB,OAApB,EADkB;MAAA;IAAA,QAAtB,EADO;EAAA,CA7DX;;AAAA,mBAmEA,YAAW,SAAC,EAAD;AACP,QAAmC,GAAG,CAAC,IAAJ,KAAY,QAA/C;AAAA,aAAO,IAAC,SAAD,CAAU,QAAV,EAAoB,IAApB,CAAP;KAAA;AAAA,IACA,IAAC,MAAD,CAAO,EAAP,EAAW,IAAX,CADA;WAEA,WAAW;aACP,EAAE,QAAF,CAAW,CAAC,KAAZ,GADO;IAAA,CAAX,EAEE,GAFF,EAHO;EAAA,CAnEX;;AAAA,mBA2EA,WAAU;AACN,QAAmC,GAAG,CAAC,IAAJ,KAAY,QAA/C;AAAA,aAAO,IAAC,SAAD,CAAU,QAAV,EAAoB,IAApB,CAAP;KAAA;WACA,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,MAAlB,CAAyB,EAAzB,EACI;AAAA,eAAS;eAAA,SAAC,KAAD;iBACL,KAAC,SAAD,CAAW,YAAQ,KAAK,CAAC,EAAd,GAAkB,OAA7B,EAAqC,IAArC,EADK;QAAA;MAAA,QAAT;AAAA,MAEA,OAAO;eAAA;iBACH,KAAC,SAAD,CAAU,QAAV,EAAoB,IAApB,EADG;QAAA;MAAA,QAFP;KADJ,EAFM;EAAA,CA3EV;;AAAA,mBAoFA,cAAa,SAAC,IAAD;AACT;AAAA,QAAsB,IAAC,SAAvB;AAAA,UAAC,SAAQ,CAAC,MAAV;KAAA;AAAA,IACA,IAAC,SAAD,GAAY,IADZ;AAAA,IAGA,KAAK,IAAC,SAAQ,CAAC,MAAV,EAAkB,CAAC,GAHxB;AAAA,IAIA,EAAE,CAAC,QAAH,CAAa,UAAM,GAAG,CAAC,IAAvB,CAJA;WAKA,EAAE,MAAF,CAAS,CAAC,MAAV,CAAiB,EAAjB,EANS;EAAA,CApFb;;AAAA,mBA4FA,aAAY,SAAC,KAAD;AACR,QAAG,IAAC,eAAJ;AACI,WAAK,CAAC,wBAAN;aACA,IAAC,eAAD,GAAkB,MAFtB;KAAA;AAMI,cAAQ,CAAC,KAAT,GAAiB,EAAE,mBAAF,CAAjB;AAEA,UAAG,IAAC,SAAD,IAAc,IAAC,SAAQ,CAAC,KAA3B;AACI,YAAG,EAAI,MAAM,CAAC,OAAP,CAAe,EAAE,wBAAF,CAAf,CAAD,CAAN;AACI,eAAK,CAAC,wBAAN;AAAA,UACA,IAAC,eAAD,GAAkB,IADlB;iBAEA,MAAM,CAAC,QAAQ,CAAC,IAAhB,GAAuB,KAAK,CAAC,aAAa,CAAC,OAH/C;SAAA;iBAKI,IAAC,SAAQ,CAAC,KAAV,GAAkB,MALtB;SADJ;OARJ;KADQ;EAAA,CA5FZ;;AAAA,mBA6GA,eAAc,SAAC,KAAD;AACV;AAAA,QAAG,IAAC,SAAD,IAAc,IAAC,SAAQ,CAAC,KAA3B;AAEI,gBAAU,EAAE,wBAAF,CAAV,CAFJ;KAAA;AAII,gBAAU,MAAV,CAJJ;KAAA;AAAA,IAKA,KAAK,CAAC,WAAN,GAAoB,OALpB;AAMA,WAAO,OAAP,CAPU;EAAA,CA7Gd;;gBAAA;;GADkC,QAAQ,CAAC,OAL/C;;;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"/home/romain/cozy/cozy-photos/build/client/public/javascripts/app.js","sourcesContent":["SocketListener = require './lib/socket_listener'\n\nmodule.exports =\n\n    initialize: ->\n\n        window.app = this\n        # Translation helpers.\n        @locale = window.locale\n        @polyglot = new Polyglot()\n        try\n            locales = require 'locales/'+ @locale\n        catch e\n            locales = require 'locales/en'\n\n        @polyglot.extend locales\n        window.t = @polyglot.t.bind @polyglot\n\n        AlbumCollection = require('collections/album')\n        Router = require('router')\n\n        @router = new Router()\n        @socketListener = new SocketListener()\n\n        $(window).on \"hashchange\", @router.hashChange\n        $(window).on \"beforeunload\", @router.beforeUnload\n\n        # Base data\n        @albums = new AlbumCollection()\n\n        @urlKey = \"\"\n        if window.location.search\n            for param in window.location.search.substring(1).split '&'\n                [key, value] = param.split '='\n                @urlKey = \"?key=#{value}\" if key is 'key'\n\n        @mode = if window.location.pathname.match /public/ then 'public'\n        else 'owner'\n\n        # Display albums. Fetch data if no data were loaded via server index.\n        if window.initalbums\n            @albums.reset window.initalbums, parse: true\n            delete window.initalbums\n            Backbone.history.start()\n        else\n            @albums.fetch().done -> Backbone.history.start()\n","# AlbumCollection\n# is a collection of Albums (models/album)\n# define the endpoint where Backbone will fetch the list of album\n\nmodule.exports = class AlbumCollection extends Backbone.Collection\n\n    model: require 'models/album'\n    url: 'albums' + app.urlKey\n    comparator: (model) -> model.get 'title'\n","# PhotoCollection\n# is a collection of Photos (models/photo)\n# define the endpoint where Backbone will fetch the list of photos\n\nmodule.exports = class PhotoCollection extends Backbone.Collection\n\n    model: require 'models/photo'\n    url: -> 'photos' + app.urlKey\n    comparator: (model) -> model.get 'title'\n","app = require 'application'\n\n$ ->\n    jQuery.event.props.push 'dataTransfer'\n    app.initialize()\n\n    # Initialize Spin JS the lib that displays loading indicators\n    $.fn.spin = (opts, color) ->\n        presets =\n            tiny:\n                lines: 8\n                length: 2\n                width: 2\n                radius: 3\n\n            small:\n                lines: 8\n                length: 1\n                width: 2\n                radius: 5\n\n            large:\n                lines: 10\n                length: 8\n                width: 4\n                radius: 8\n\n        if Spinner\n            @each ->\n                $this = $(this)\n                spinner = $this.data(\"spinner\")\n                if spinner?\n                    spinner.stop()\n                    $this.data \"spinner\", null\n                else if opts isnt false\n                    if typeof opts is \"string\"\n                        if opts of presets\n                            opts = presets[opts]\n                        else\n                            opts = {}\n                        opts.color = color    if color\n                    spinner = new Spinner(\n                        $.extend(color: $this.css(\"color\"), opts))\n                    spinner.spin(this)\n                    $this.data \"spinner\", spinner\n\n        else\n            console.log \"Spinner class not available.\"\n            null\n","# BaseView used to DRY other views\n# - copy view options in view object\n# - pass the options, as well as getRenderData to the template\n# - render the template inside its el\n# provide a afterRender hook\n\nmodule.exports = class BaseView extends Backbone.View\n    initialize: (options) ->\n        @options = options\n\n    template: ->\n\n    getRenderData: ->\n\n    render: =>\n        data = _.extend {}, @options, @getRenderData()\n        @$el.html @template(data)\n        @afterRender()\n        this\n\n    afterRender: ->\n","\n# Make ajax request more easy to do.\n# Expected callbacks: success and error\nexports.request = (type, url, data, callbacks) ->\n\n    success = callbacks.success or (res) -> callbacks null, res\n    error = callbacks.error or (err) -> callbacks err\n\n\n    $.ajax\n        type: type\n        url: url\n        data: data\n        success: success\n        error: error\n\n# Sends a get request with data as body\n# Expected callbacks: success and error\nexports.get = (url, callbacks) ->\n    exports.request \"GET\", url, null, callbacks\n\n# Sends a post request with data as body\n# Expected callbacks: success and error\nexports.post = (url, data, callbacks) ->\n    exports.request \"POST\", url, data, callbacks\n\n# Sends a put request with data as body\n# Expected callbacks: success and error\nexports.put = (url, data, callbacks) ->\n    exports.request \"PUT\", url, data, callbacks\n\n# Sends a delete request with data as body\n# Expected callbacks: success and error\nexports.del = (url, callbacks) ->\n    exports.request \"DELETE\", url, null, callbacks\n","# Facilitator to allow user to copy url to clipboard in a easy way.\nmodule.exports = class Clipboard\n\n    constructor: ->\n        @value = \"\"\n\n        $(document).keydown (e) =>\n            # Check if value exist and if user wants to copy\n            if not @value or not(e.ctrlKey or e.metaKey)\n                return\n            if window.getSelection?()?.toString()\n                return\n\n            if document.selection?.createRange().text\n                return\n            _.defer =>\n                $clipboardContainer = $(\"#clipboard-container\")\n                $clipboardContainer.empty().show()\n                $(\"<textarea id='clipboard'></textarea>\")\n                .val(@value)\n                .appendTo($clipboardContainer)\n                .focus()\n                .select()\n\n        $(document).keyup (e) =>\n            if $(e.target).is(\"#clipboard\")\n                $(\"<textarea id='clipboard'></textarea>\").val(\"\")\n                $(\"#clipboard-container\").empty().hide()\n\n    set: (value) =>\n        @value = value\n","module.exports =\n\n    # Simple shortener to display of a long text\n    # used for album descriptions on AlbumList page\n    # @TODO: make this HTML resistant\n    limitLength: (string, length) ->\n        if string? and string.length > length\n        then string.substring(0, length) + '...'\n        else string\n\n    # Focus a given element (required for content editable elements).\n    forceFocus: (el) ->\n        range = document.createRange()\n        range.selectNodeContents el[0]\n        sel = document.getSelection()\n        sel.removeAllRanges()\n        sel.addRange(range)\n        el.focus()\n\n    ## Helpers to rotate photos\n    # TODO refactor it with switch\n\n    rotate: (orientation, image) ->\n        if navigator.userAgent.search(\"Firefox\") isnt -1\n            transform = \"transform\"\n        else\n            transform = \"-webkit-transform\"\n        if orientation is undefined or orientation is 1\n            image.css transform, \"rotate(\" + 0 + \"deg)\"\n            return\n        else if orientation is 2\n            image.css transform, \"scale(-1, 1)\"\n        else if orientation is 3\n            image.css transform, \"rotate(\" + 180 + \"deg)\"\n        else if orientation is 4\n            image.css transform, \"scale(1, -1)\"\n        else if orientation is 5\n            image.css transform, \"rotate(\" + -90 + \"deg) scale(-1, 1) \"\n        else if orientation is 6\n            image.css transform, \"rotate(\" + 90 + \"deg)\"\n        else if orientation is 7\n            image.css transform, \"rotate(\" + 90 + \"deg) scale(-1, 1)\"\n        else if orientation is 8\n            image.css transform, \"rotate(\" + -90 + \"deg)\"\n\n    getRotate: (orientation, image) ->\n        if navigator.userAgent.search(\"Firefox\") isnt -1\n            transform = \"transform\"\n        else\n            transform = \"-webkit-transform\"\n        if orientation is undefined or orientation is 1\n            return transform + \": rotate(\" + 0 + \"deg)\"\n        else if orientation is 2\n            return transform + \": scale(-1, 1)\"\n        else if orientation is 3\n            return transform + \": rotate(\" + 180 + \"deg)\"\n        else if orientation is 4\n            return transform + \": scale(1, -1)\"\n        else if orientation is 5\n            return transform + \": rotate(\" + -90 + \"deg) scale(-1, 1) \"\n        else if orientation is 6\n            return transform + \": rotate(\" + 90 + \"deg)\"\n        else if orientation is 7\n            return transform + \": rotate(\" + 90 + \"deg) scale(-1, 1)\"\n        else if orientation is 8\n            return transform + \": rotate(\" + -90 + \"deg)\"\n\n    rotateLeft: (orientation, image) ->\n        if orientation is undefined or orientation is 1\n            return 8\n        else if orientation is 2\n            return 5\n        else if orientation is 3\n            return 6\n        else if orientation is 4\n            return 7\n        else if orientation is 5\n            return 4\n        else if orientation is 6\n            return 1\n        else if orientation is 7\n            return 2\n        else if orientation is 8\n            return 3\n\n    rotateRight: (orientation, image) ->\n        if orientation is undefined or orientation is 1\n            return 6\n        else if orientation is 2\n            return 7\n        else if orientation is 3\n            return 8\n        else if orientation is 4\n            return 5\n        else if orientation is 5\n            return 2\n        else if orientation is 6\n            return 3\n        else if orientation is 7\n            return 4\n        else if orientation is 8\n            return 1\n","BaseView = require '../lib/base_view'\n\nmodule.exports = class ModalView extends BaseView\n\n    id: \"dialog-modal\"\n    className: \"modal fade\"\n    attributes:\n        'tab-index': -1\n    template: require './templates/modal'\n    value: 0\n\n    events: ->\n        \"click #modal-dialog-no\"  : \"onNo\"\n        \"click #modal-dialog-yes\" : \"onYes\"\n\n    constructor: (@title, @msg, @yes, @no, @cb, @hideOnYes) ->\n        super()\n        @hideOnYes = true unless @hideOnYes?\n\n    initialize: ->\n        @$el.on 'hidden.bs.modal', => @close()\n\n        @render()\n        @show()\n\n    onYes: ->\n        @cb true if @cb\n        @hide()\n\n    onNo: ->\n        @cb false if @cb\n        @hide() if @hideOnYes\n\n    onShow: ->\n\n    close: ->\n        setTimeout (() => @destroy()), 500\n\n    show: ->\n        @$el.modal 'show'\n        @$el.trigger 'show'\n\n    hide: ->\n        @$el.modal 'hide'\n        @$el.trigger 'hide'\n\n    render: ->\n        @$el.append @template(title: @title, msg: @msg, yes: @yes, no: @no)\n        $(\"body\").append @$el\n        @afterRender()\n        @\n\nmodule.exports.error = (code, cb) ->\n    new ModalView t(\"modal error\"), code, t(\"modal ok\"), false, cb\n","contactCollection = require 'cozy-clearance/contact_collection'\r\n\r\nmodule.exports = class ContactListener extends CozySocketListener\r\n\r\n    events: [\r\n        'contact.create'\r\n        'contact.update'\r\n        'contact.delete'\r\n    ]\r\n\r\n    process: (event) ->\r\n        if event.doctype is 'contact'\r\n            contactCollection.handleRealtimeContactEvent event","BaseView = require 'lib/base_view'\n\n# View that display a collection of subitems\n# used to DRY views\n# Usage : new ViewCollection(collection:collection)\n# Automatically populate itself by creating a itemView for each item\n# in its collection\n\n# can use a template that will be displayed alongside the itemViews\n\n# itemView       : the Backbone.View to be used for items\n# itemViewOptions : the options that will be passed to itemViews\n\nmodule.exports = class ViewCollection extends BaseView\n\n    views: {}\n\n    itemView: null\n\n\n    itemViewOptions: ->\n\n    # add 'empty' class to view when there is no subview\n    checkIfEmpty: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # can be overriden if we want to place the subviews somewhere else\n    appendView: (view) ->\n\n        index = @collection.indexOf view.model\n\n        @$el.append view.$el\n        # if index is 0\n        # else\n\n        #     className = if view.className? then \".#{view.className}\"\n        #     else \"\"\n\n        #     tagName = view.tagName or \"\"\n\n        #     selector = \"#{tagName}#{className}:nth-of-type(#{index})\"\n        #     @$el.find(selector).after view.$el\n\n\n    # bind listeners to the collection\n    initialize: ->\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"sort\",    @render\n        @listenTo @collection, \"remove\",  @removeItem\n        @onReset @collection\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n\n    # after render, we reattach the views\n    afterRender: ->\n        if @collection.length > 0\n            for i in [0..@collection.length-1]\n                @appendView @views[@collection.at(i).cid]\n\n            @checkIfEmpty @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        view.remove() for id, view of @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, {model: model}, @itemViewOptions(model)\n        view = new @itemView(options)\n        @views[model.cid] = view.render()\n        @appendView view\n        @checkIfEmpty @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @views[model.cid].remove()\n        delete @views[model.cid]\n        @checkIfEmpty @views\n\n","module.exports =\n\n    \"or\": \"oder\"\n    \"Back\" : \"Zurck\"\n    \"Create a new album\" : \"Neues Album erstellen\"\n    \"Delete\" : \"Lschen\"\n    \"Download\" : \"Herunterladen\"\n    \"Edit\" : \"Bearbeiten\"\n    \"Stop editing\" : \"nderungen speichern\"\n    \"It will appear on your homepage.\" : \"Es wird auf dem Album Seite angezeigt.\"\n    \"Make it Hidden\" : \"Verborgen\"\n    \"Make it Private\" : \"Privat\"\n    \"Make it Public\" : \"ffentlich\"\n    \"New\" : \"New\"\n    \"private\" : \"Privat\"\n    \"public\" : \"ffentlich\"\n    \"hidden\" : \"Verborgen\"\n    \"There is no photos in this album\" : \"Es ist kein Foto in diesem Album. Klicken Sie Bearbeiten um neue hinzuzufgen.\"\n    \"There is no public albums.\" : \"Es existiert kein Album.\"\n    \"This album is private\" : \"Dieses Album ist privat\"\n    \"This album is hidden\" : \"Dieses Album ist verborgen\"\n    \"This album is public\" : \"Dieses Album is ffentlich\"\n    \"title placeholder\" : \"Vergeben Sie einen Tittel fr dieses Album\"\n    \"View\" : \"Ansicht\"\n    \"description placeholder\" : \"Schreiben Sie eine Beschreibung\"\n    \"is too big (max 10Mo)\":\"ist zu gro (max. 10Mo)\"\n    \"is not an image\": \"ist kein Bild\"\n    \"Share album by mail\": \"Album via E-Mail teilen\"\n    \"Upload your contacts...\": \"Ihre Kontakte hochladen\"\n    \"Share album\": \"Album teilen\"\n    \"Add contact\": \"Kontact hinzufgen\"\n    \"Send mail\": \"E-Mail senden\"\n    \"Select your friends\": \"Ihre Freunde auswhlen\"\n    \"Add\": \"Hinzufgen\"\n    \"Cancel\": \"Abbrechen\"\n    \"photo successfully set as cover\": \"\"\"\n        Diese Bild ist erfolgreich als Album Cover vergeben\"\"\"\n    \"problem occured while setting cover\": \"\"\"\n        Ein Problem ist aufgetreten whrend der Vergabe dieses Bild als Album Cover\"\"\"\n\n\n    \"pick from computer\":\"\"\"\n        Klicken Sie hier oder ziehen Sie Ihre Bilder um Sie zu diesem Album hinzu zufgen.\n    \"\"\"\n    \"pick from files\":\"\"\"\n        Klicken Sie hier um Bilder von der Files app zu bernehmen.\n    \"\"\"\n\n    \"hidden-description\": \"\"\"\n      It will not appear on your homepage.\n      But you can share it with the following url:\n    \"\"\"\n\n    \"It cannot be accessed from the public side\" : \"\"\"\n      Es is keine ffentlich Ressource.\"\n    \"\"\"\n    \"rebuild thumbnails\": \"Neuaufbau Thumbnails\"\n\n    \"01\": \"Januar\"\n    \"02\": \"Februar\"\n    \"03\": \"Mrz\"\n    \"04\": \"April\"\n    \"05\": \"Mai\"\n    \"06\": \"Juni\"\n    \"07\": \"Juli\"\n    \"08\": \"August\"\n    \"09\": \"September\"\n    \"10\": \"Oktober\"\n    \"11\": \"November\"\n    \"12\": \"Dezember\"\n    # clearance modal\n    \"cancel\" : \"Abbrechen\"\n    \"copy paste link\" : \"Um Ihrem Kontakt Zugriff zu gewhren senden Sie Ihr/Ihm den Linnk unten:\"\n    \"details\" : \"Details\"\n    \"inherited from\" : \"geerbt von\"\n    \"modal question album shareable\" : \"Whlen Sie Teilen Modus fr diese Album\"\n    \"modal shared album custom msg\" : \"E-Mail Adresse eingeben und Enter drcken\"\n    \"modal shared album link msg\" : \"Senden Sie diesen Link um Leuten Zugriff zu diesem Album zu gewhren\"\n    \"modal shared public link msg\"    : \"Senden Sie diesen Link um Leuten Zugriff zu diesm Ordner zu gewhren:\"\n    \"modal shared with people msg\"    : \"\"\"\n        Eine Auswahl von Kontakten fr Zugriff einladen. E-Mail\n         in das Feld eintragen und Enter drcken (Eine E-Mail wird zu Ihnen versand):\"\"\"\n    \"modal send mails\" : \"Eine Mitteilung versenden\"\n    \"modal next\": \"Nchste\"\n    \"modal prev\": \"Vorherige\"\n    \"modal ok\": \"Ok\"\n    \"modal cancel\": \"Abbrechen\"\n    \"modal error\": \"Fehler\"\n    \"only you can see\" : \"Nur Sie und die aufgelsiteten Leutehaben Zugriff auf diese Ressource\"\n    \"public\" : \"ffentlich\"\n    \"private\" : \"Privat\"\n    \"shared\" : \"Geteilt\"\n    \"share\" : \"Teilen\"\n    \"save\" : \"Speichern\"\n    \"see link\" : \"Siehe Link\"\n    \"send mails question\" : \"Eine Mitteilungs E-Mail versenden an:\"\n    \"sharing\" : \"Teilen\"\n    \"revoke\" : \"Absagen\"\n    \"confirm\" : \"Besttigen\"\n    \"share forgot add\" : \"\"\"\n        Scheint so als ob Sie vergessen haben die Schaltflche Hinzufgen zu drcken\"\"\"\n    \"share confirm save\" : \"\"\"\n        Die nderungen die Sie an den Rechten vorgenommen haben, werden nicht gespeichert. Mchten Sie fortfahren?\"\"\"\n    \"yes forgot\" : \"Zurck\"\n    \"no forgot\" : \"es ist ok\"\n    \"perm\" : \"can \"\n    \"perm r album\" : \"Diese Album durchblttern\"\n    \"perm rw album\" : \"Fotos durchblttern und hochladen\"\n    \"mail not send\"        : \"E-Mail nicht gesendet\"\n    \"server error occured\" : \"Fehler auf Server Seite aufgetreten, bitte spter noch einmal probieren\"\n\n    \"change notif\" : \"\"\"\n        Diesen Kasten anwhlen um benachrichtigt zu werden, wenn eine Kontakt\n        ein Bild zu diesem Album hinzufgt.\"\"\"\n    \"send email hint\": \"Mitteilungs E-Mails werden einmalig beim Speichern gesendet\"\n    \"yes\" : \"Ja\"\n    \"no\" : \"Nein\"\n    \"picture\": \"Bild |||| Bilder\"\n    \"delete empty album\": \"Dieses Album ist leer, mchten Sie es lschen?\"\n    \"are you sure you want to delete this album\": \"Sind Sie sicher diese Album zu lschen?\"\n    \"photos search\"   : \"Laden ...\"\n    \"no photos found\" : \"Keine Bilder gefunden\"\n    \"thumb creation\"  : \"Applikation erstellt Thumbs fr Dateien.\"\n    \"progress\"        : \"Fortschritt\"\n    \"Navigate before upload\" : \"Hochladen noch aktiv, mchten Sie wirklich diese Seite verlassen?\"\n    \"application title\": \"Cozy - photos\"\n","module.exports =\n\n    \"or\": \"or\"\n    \"Back\" : \"Back\"\n    \"Create a new album\" : \"Create a new album\"\n    \"Delete\" : \"Delete\"\n    \"Download\" : \"Download\"\n    \"Edit\" : \"Edit\"\n    \"Stop editing\" : \"Save Changes\"\n    \"It will appear on your homepage.\" : \"It will be displayed on the album page.\"\n    \"Make it Hidden\" : \"hidden\"\n    \"Make it Private\" : \"private\"\n    \"Make it Public\" : \"public\"\n    \"New\" : \"New\"\n    \"private\" : \"private\"\n    \"public\" : \"public\"\n    \"hidden\" : \"hidden\"\n    \"There is no photos in this album\" : \"There is no photo in this album. Click on Edit button to add new ones.\"\n    \"There is no public albums.\" : \"There are no albums.\"\n    \"This album is private\" : \"This album is private\"\n    \"This album is hidden\" : \"This album is hidden\"\n    \"This album is public\" : \"This album is public\"\n    \"title placeholder\" : \"Set a title for this album\"\n    \"View\" : \"View\"\n    \"description placeholder\" : \"Write a description\"\n    \"is too big (max 10Mo)\":\"is too big (max 10Mo)\"\n    \"is not an image\": \"is not an image\"\n    \"Share album by mail\": \"Share album by mail\"\n    \"Upload your contacts...\": \"Upload your contacts\"\n    \"Share album\": \"Share album\"\n    \"Add contact\": \"Add contact\"\n    \"Send mail\": \"Send mail\"\n    \"Select your friends\": \"Select your friends\"\n    \"Add\": \"Add\"\n    \"Cancel\": \"Cancel\"\n    \"photo successfully set as cover\": \"\"\"\n        The picture has been successfully set as album cover\"\"\"\n    \"problem occured while setting cover\": \"\"\"\n        A problem occured while setting picture as cover\"\"\"\n\n\n    \"pick from computer\":\"\"\"\n        Click here or drag your photos below to add them to the album.\n    \"\"\"\n    \"pick from files\":\"\"\"\n        Click here to pick pictures from the Files app.\n    \"\"\"\n\n    \"hidden-description\": \"\"\"\n      It will not appear on your homepage.\n      But you can share it with the following url:\n    \"\"\"\n\n    \"It cannot be accessed from the public side\" : \"\"\"\n      It is not a public resource.\"\n    \"\"\"\n    \"rebuild thumbnails\": \"Rebuild thumbnails\"\n\n    \"01\": \"January\"\n    \"02\": \"February\"\n    \"03\": \"March\"\n    \"04\": \"April\"\n    \"05\": \"May\"\n    \"06\": \"June\"\n    \"07\": \"July\"\n    \"08\": \"August\"\n    \"09\": \"September\"\n    \"10\": \"October\"\n    \"11\": \"November\"\n    \"12\": \"December\"\n    # clearance modal\n    \"cancel\" : \"Cancel\"\n    \"copy paste link\" : \"To give access to your contact send him/her the link below:\"\n    \"details\" : \"Details\"\n    \"inherited from\" : \"inherited from\"\n    \"modal question album shareable\" : \"Select share mode for this album\"\n    \"modal shared album custom msg\" : \"Enter email and press enter\"\n    \"modal shared album link msg\" : \"Send this link to let people access this album\"\n    \"modal shared public link msg\"    : \"Send this link to let people access this folder:\"\n    \"modal shared with people msg\"    : \"\"\"\n        Invite a selection of contacts to access it. Type\n         email in the field and press enter (An email will be sent to them):\"\"\"\n    \"modal send mails\" : \"Send a notification\"\n    \"modal next\": \"Next\"\n    \"modal prev\": \"Previous\"\n    \"modal ok\": \"Ok\"\n    \"modal cancel\": \"Cancel\"\n    \"modal error\": \"Error\"\n    \"only you can see\" : \"Only you and the people listed below can access this resource\"\n    \"public\" : \"Public\"\n    \"private\" : \"Private\"\n    \"shared\" : \"Shared\"\n    \"share\" : \"Share\"\n    \"save\" : \"Save\"\n    \"see link\" : \"See link\"\n    \"send mails question\" : \"Send a notification email to:\"\n    \"sharing\" : \"Sharing\"\n    \"revoke\" : \"Revoke\"\n    \"confirm\" : \"Confirm\"\n    \"share forgot add\" : \"\"\"\n        Looks like you forgot to click the Add button\"\"\"\n    \"share confirm save\" : \"\"\"\n        The changes you made to the permissions will not be saved. Do you want to continue?\"\"\"\n    \"yes forgot\" : \"Back\"\n    \"no forgot\" : \"It's ok\"\n    \"perm\" : \"can \"\n    \"perm r album\" : \"browse this album\"\n    \"perm rw album\" : \"browse and upload photos\"\n    \"mail not send\"        : \"Mail not sent\"\n    \"server error occured\" : \"Error occured on server side, please try again later\"\n\n    \"change notif\" : \"\"\"\n        Check this box to be notified when a contact\n        will add a photo to this album.\"\"\"\n    \"send email hint\": \"Notification emails will be sent one time on save\"\n    \"yes\" : \"Yes\"\n    \"no\" : \"No\"\n    \"picture\": \"picture |||| pictures\"\n    \"delete empty album\": \"This album is empty, do you want to delete it?\"\n    \"are you sure you want to delete this album\": \"Are you sure you want to delete this album?\"\n    \"photos search\"   : \"Loading ...\"\n    \"no photos found\" : \"No photos found\"\n    \"thumb creation\"  : \"Application creates thumbs for files.\"\n    \"progress\"        : \"Progression\"\n    \"Navigate before upload\" : \"Some upload are in progress, do you really want to leave this page?\"\n    \"application title\": \"Cozy - photos\"\n","module.exports =\n    \"or\":\"o\"\n    \"Back\" : \"Retroceder\"\n    \"Create a new album\" : \"Crear un album\"\n    \"Delete\" : \"Borrar\"\n    \"Download\" : \"Descargar\"\n    \"Edit\" : \"Editar\"\n    \"Stop editing\" : \"Guardar los cambios\"\n    \"It will appear on your homepage.\" : \"Aparecer en su pgina de Inicio.\"\n    \"Make it Hidden\" : \"oculto\"\n    \"Make it Private\" : \"privado\"\n    \"Make it Public\" : \"pblico\"\n    \"New\" : \"Nuevo\"\n    \"private\" : \"privado\"\n    \"public\" : \"pblico\"\n    \"hidden\" : \"oculto\"\n    \"There is no photos in this album\" : \"No hay fotos en este album.\"\n    \"There is no public albums.\" : \"No hay ningn album.\"\n    \"This album is private\" : \"Este album es privado\"\n    \"This album is hidden\" : \"Este album es oculto\"\n    \"This album is public\" : \"Este album es pblico\"\n    \"title placeholder\" : \"Ttulo\"\n    \"View\" : \"Ver\"\n    \"description placeholder\" : \"Descripcin\"\n    \"is too big (max 10Mo)\":\"es demasiado grande (max 10Mo)\"\n    \"is not an image\": \"no es una imagen\"\n    \"Share album by mail\": \"Comparta por email\"\n    \"Upload your contacts...\": \"Cargue sus contactos\"\n    \"Share album\": \"Comparta el album\"\n    \"Add contact\": \"Aada un contacto\"\n    \"Send mail\": \"Enve un mensaje\"\n    \"Select your friends\": \"Escoja a sus amigos\"\n    \"Add\": \"Aadir\"\n    \"Cancel\": \"Anular\"\n    \"photo successfully set as cover\": \"\"\"\n         Exito al fijar la imagen como  portada del album\"\"\"\n    \"problem occured while setting cover\": \"\"\"\n        Ocurri un problema al poner la imagen como portada del album.\"\"\"\n\n\n    \"pick from computer\":\"\"\"\n        Para aadir imgenes, haga clic aqu o arrastre y pegue sus fotos.\n    \"\"\"\n    \"pick from files\":\"\"\"\n        Haga clic aqu para importar imgenes desde la aplicacin Archivos.\n    \"\"\"\n\n    \"hidden-description\": \"\"\"\n      No aparecer en su pgina de Inicio.\n      Pero usted puede compartirlo en esta url:\n    \"\"\"\n\n    \"No puede verse desde el lado pblico.\":\"\"\"\n      No es un recurso pblico.\"\n    \"\"\"\n    \"rebuild thumbnails\": \"Regenerar las miniaturas\"\n\n    \"01\": \"Enero\"\n    \"02\": \"Febrero\"\n    \"03\": \"Marzo\"\n    \"04\": \"Abril\"\n    \"05\": \"Mayo\"\n    \"06\": \"Junio\"\n    \"07\": \"Julio\"\n    \"08\": \"Agosto\"\n    \"09\": \"Septiembre\"\n    \"10\": \"Octubre\"\n    \"11\": \"Noviembre\"\n    \"12\": \"Diciembre\"\n    # clearance modal\n    \"cancel\" : \"Anular\"\n    \"copy paste link\" : \"Para que su contacto pueda acceder, envele este enlace:\"\n    \"details\" : \"Detalles\"\n    \"inherited from\" : \"heredado de\"\n    \"modal question album shareable\" : \"Escoja la manera de compartir este album\"\n    \"modal shared album custom msg\" : \"Inserte un email y pulse en Enter\"\n    \"modal shared public link msg\" : \"Enve este enlace para compartir este album\"\n    \"modal shared public link msg\":\"Enve este enlace para compartir esta carpeta.\"\n    \"modal shared with people msg\"    : \"\"\"\n        Invite a algunos contactos seleccionados a que accedan. Introduzca\n         el email en la casilla y pulse en Enter (para informarles se les enviar un email):\"\"\"\n    \"modal send mails\" : \"Enve un aviso\"\n    \"modal next\": \"Siguiente\"\n    \"modal prev\": \"Precedente\"\n    \"modal ok\": \"Ok\"\n    \"modal cancel\": \"Anular\"\n    \"modal error\": \"Error\"\n    \"only you can see\" : \"Slo usted y las personas que aparecen en la lista siguiente pueden acceder al recurso\"\n    \"public\" : \"Pblico\"\n    \"private\" : \"Privado\"\n    \"shared\" : \"Compartido\"\n    \"share\" : \"Compartir\"\n    \"save\" : \"Guardar\"\n    \"see link\" : \"Ver el enlace\"\n    \"send mails question\" : \"Avisar por email a:\"\n    \"sharing\" : \"Compartir\"\n    \"revoke\" : \"Revocar el permiso\"\n    \"confirm\" : \"Confirmar\"\n    \"share forgot add\": \"\"\"\n        Parece que a usted se le ha olvidado pulsar el botn Aadir\"\"\"\n    \"share confirm save\" : \"\"\"\n        Los cambios efectuados en los permisos no se tendrn en cuenta. Lo confirma?.\"\"\"\n    \"yes forgot\": \"Ir atrs\"\n    \"no forgot\": \"Ok\"\n    \"perm\": \"Usted puede \"\n    \"perm r album\": \"navegar en este album\"\n    \"perm rw album\": \"navegue en este album y cargue fotos\"\n    \"mail not send\": \"El mensaje no ha sido enviado\"\n    \"server error occured\": \"Ocurri un error en el servidor, intente de nuevo\"\n\n    \"change notif\" : \"\"\"\n        Marque esta casilla para recibir un aviso cozy cuando un contacto\n        aada una foto a este album.\"\"\"\n    \"send email hint\": \"Se avisa por emails cuando se guarda por primera vez\"\n    \"yes\" : \"Si\"\n    \"no\" : \"No\"\n    \"picture\": \"foto |||| fotos\"\n    \"delete empty album\": \"El album est vaco,  quiere borrarlo?\"\n    \"are you sure you want to delete this album\": \"Esta seguro(a) de querer borrar este album?\"\n    \"photos search\" : \"Cargando ...\"\n    \"no photos found\" : \"No se ha encontrado ninguna foto\"\n    \"thumb creation\"  : \"La aplicacin est creando miniaturas para mejorar la navegacin.\"\n    \"progress\" : \"Avance\"\n    \"Navigate before upload\" : \"Algunas pginas todava no se han enviado al servidor, desea realmente salir de esta pgina?\"\n    \"application title\": \"Cozy - fotos\"\n","module.exports =\n\n    \"or\": \"ou\"\n    \"Back\" : \"Retour\"\n    \"Create a new album\" : \"Crer un nouvel album\"\n    \"Delete\" : \"Supprimer\"\n    \"Download\" : \"Tlcharger\"\n    \"Edit\" : \"Modifier\"\n    \"Stop editing\" : \"Enregistrer\"\n    \"It will appears on your homepage.\" : \"Il apparatra sur votre page d'accueil\"\n    \"Make it Hidden\" : \"masqu\"\n    \"Make it Private\" : \"priv\"\n    \"Make it Public\" : \"public\"\n    \"New\" : \"Nouveau\"\n    \"private\" : \"priv\"\n    \"public\" : \"public\"\n    \"hidden\" : \"masqu\"\n    \"There is no photos in this album\" : \"Pas de photos dans cet album\"\n    \"There is no public albums.\" : \"Il n'y a aucun album\"\n    \"This album is private\" : \"Cet album est priv\"\n    \"This album is hidden\" : \"Cet album est masqu\"\n    \"This album is public\" : \"Cet album est public\"\n    \"title placeholder\" : \"Titre...\"\n    \"description placeholder\" : \"Description...\"\n    \"View\" : \"Voir\"\n    \"is too big (max 10Mo)\":\"est trop grosse (max 10Mo)\"\n    \"is not an image\": \"n'est pas une image\"\n    \"Share album by mail\": \"Partagez par mail\"\n    \"Upload your contacts ...\": \"Uploadez vos contacts...\"\n    \"Share album\": \"Partagez l'album\"\n    \"Add contact\": \"Ajoutez un contact\"\n    \"Send mail\": \"Envoyez mail\"\n    \"Select your friends\": \"Choisissez vos amis\"\n    \"Add\": \"Ajouter\"\n    \"Cancel\": \"Annuler\"\n    \"photo successfully set as cover\": \"\"\"\n        L'image est maintenant la couverture de l'album.\"\"\"\n    \"problem occured while setting cover\": \"\"\"\n        Un problme est survenu en positionnant l'image comme couverture de\n        l'album.\"\"\"\n\n    \"pick from computer\":\"\"\"\n        Cliquez ici ou glissez-dposez vos photos pour ajouter des images\n    \"\"\"\n    \"pick from files\":\"\"\"\n        Cliquez ici pour importer des images de l'application Files\n    \"\"\"\n\n    \"hidden-description\": \"\"\"\n      Il n'apparatra pas sur votre page d'accueil,\n      Mais vous pouvez partager cette URL :\n    \"\"\"\n\n    \"It cannot be accessed from the public side\" : \"\"\"\n      Il ne peut pas tre vu depuis le ct public\n    \"\"\"\n\n    \"rebuild thumbnails\": \"Regnrer les vignettes\"\n\n    \"01\": \"Janvier\"\n    \"02\": \"Fvrier\"\n    \"03\": \"Mars\"\n    \"04\": \"Avril\"\n    \"05\": \"Mai\"\n    \"06\": \"Juin\"\n    \"07\": \"Juillet\"\n    \"08\": \"Aot\"\n    \"09\": \"Septembre\"\n    \"10\": \"Octobre\"\n    \"11\": \"Novembre\"\n    \"12\": \"Dcembre\"\n     # clearance modal\n    \"also have access\" : \"Ces personnes ont galement accs, car elles ont accs  un dossier parent\"\n    \"cancel\" : \"Annuler\"\n    \"copy paste link\" : \"Pour donner accs  votre contact envoyez-lui ce lien : \"\n    \"details\" : \"Dtails\"\n    \"inherited from\" : \"hrit de\"\n    \"modal question album shareable\" : \"Choisissez le mode de partage pour cet album\"\n    \"modal shared album custom msg\" : \"Entrez un email et appuyez sur Entre\"\n    \"modal shared public link msg\"    : \"Envoyez ce lien pour partager cet album\"\n    \"modal shared with people msg\"    : \"\"\"Invitez une slection de contacts  y accder. Taper l'email\n         dans le champ et appuyez sur entre (un email pour les prvenir leur sera envoy) :\"\"\"\n    \"only you can see\"                : \"Seul vous pouvez accder  cette ressource.\"\n    \"modal send mails\" : \"Envoyer une notification\"\n    \"modal next\": \"Suivant\"\n    \"modal prev\": \"Prcdent\"\n    \"modal ok\": \"Ok\"\n    \"modal cancel\": \"Annuler\"\n    \"modal error\": \"Erreur\"\n    \"only you can see\" : \"Seuls vous et les personnes ci-dessous peuvent accder  cette ressource.\"\n    \"public\" : \"Public\"\n    \"private\" : \"Priv\"\n    \"shared\" : \"Partag\"\n    \"share\" : \"Partager\"\n    \"save\" : \"Sauvegarder\"\n    \"see link\" : \"Voir le lien\"\n    \"sharing\" : \"Partage\"\n    \"revoke\" : \"Rvoquer la permission\"\n    \"send mails question\" : \"Envoyer un email de notification  : \"\n    \"forced public\" : \"Ce dossier est public car un dossier parent est public : \"\n    \"confirm\" : \"Confirmer\"\n    \"share forgot add\" : \"\"\"\n        Il semble que vous ayez oubli d'appuyer sur le bouton Ajouter\n    \"\"\"\n    \"share confirm save\" : \"\"\"\n        Les changements effectus sur les permissions ne seront pas sauvegards. Vous confirmez?\n    \"\"\"\n    \"yes forgot\" : \"Retour\"\n    \"no forgot\" : \"Ok\"\n    \"perm\" : \"peut \"\n    \"r\" : \"lire cet album\"\n    \"perm r album\" : \"parcourir cet album\"\n    \"perm rw album\" : \"parcourir cet album et ajouter des photos\"\n    \"mail not send\" : \"Le message n'a pas pu tre envoy\"\n    \"server error occured\"            : \"Une erreur est survenue sur le serveur, veuillez ressayer\"\n\n    \"change notif\" : \"\"\"\n        Cocher cette case pour recevoir une notification cozy quand un contact\n         ajoute une photo  cet album.\n    \"\"\"\n    \"send email hint\": \"Des emails de notification seront envoys lors de la premire sauvegarde.\"\n    \"yes\" : \"Oui\"\n    \"no\" : \"Non\"\n    \"picture\": \"photo |||| photos\"\n    \"delete empty album\": \"L'album est vide, voulez-vous le supprimer?\"\n    \"are you sure you want to delete this album\": \"Voulez-vous vraiment effacer cet album ?\"\n    \"photos search\"   : \"Recherche des photos...\"\n    \"no photos found\" : \"Aucune photo trouve...\"\n    \"thumb creation\"  : \"L'application est en train de crer des minatures pour vos photos afin d'amliorer votre navigation.\"\n    \"progress\"        : \"Progression\"\n    \"Navigate before upload\" : \"Certaines photos n'ont pas encore t envoyes au serveur, voulez-vous vraiment quitter cette page?\"\n    \"application title\": \"Cozy - photos\"\n","PhotoCollection = require 'collections/photo'\nclient = require \"../lib/client\"\n\n# An album\n# Properties :\n# - photos : a PhotoCollection of the photo in this album\n# maintains attribute\n\nmodule.exports = class Album extends Backbone.Model\n\n    urlRoot: 'albums'\n\n    defaults: ->\n        title: ''\n        description: ''\n        clearance: []\n        thumbsrc: 'img/nophotos.gif'\n        orientation: 1\n        updated: null\n\n    url: -> super + app.urlKey\n\n    constructor: ->\n        @photos = new PhotoCollection()\n        return super\n\n    # Build orientation and cover thumb src from photo attribute/\n    parse: (attrs) ->\n\n        if attrs.photos?.length > 0\n            @photos.reset attrs.photos, parse: true\n        delete attrs.photos\n\n\n        if attrs.coverPicture and attrs.coverPicture isnt 'null'\n            attrs.thumb = attrs.coverPicture\n            attrs.thumbsrc = \"photos/thumbs/#{attrs.coverPicture}.jpg\"\n            if @photos.get(attrs.coverPicture)?.attributes?.orientation?\n                attrs.orientation =\n                    @photos._byId[attrs.coverPicture].attributes.orientation\n\n        if attrs.clearance is 'hidden'\n            attrs.clearance = 'public'\n\n        if attrs.clearance is 'private'\n            attrs.clearance = []\n\n        return attrs\n\n    # Build cover thumb src from coverPicture field.\n    getThumbSrc: ->\n        coverPicture = @get 'coverPicture'\n        if coverPicture?\n            thumbSrc = \"photos/thumbs/#{@get 'coverPicture'}.jpg\"\n        else\n            thumbSrc = \"img/nophotos.gif\"\n        return thumbSrc + app.urlKey\n\n    getPublicURL: (key) ->\n        urlKey = if key then \"?key=#{key}\" else \"\"\n        \"#{window.location.origin}/public/photos/#{urlKey}#albums/#{@id}\"\n\n    # Send sharing email for this album.\n    sendMail: (url, mails, callback) ->\n        data =\n            url: url\n            mails: mails\n        client.post \"albums/share\", data, callback\n","client = require('../lib/client')\n\n# A photo\n# maintains attributes src / thumbsrc depending of the state of the model\nmodule.exports = class Photo extends Backbone.Model\n\n    defaults: ->\n        thumbsrc: 'img/loading.gif'\n        src: ''\n        orientation: 1\n\n    url: ->\n        super + app.urlKey\n\n    # build img src attributes from id.\n    parse: (attrs) ->\n        if not attrs.id then attrs\n        else _.extend attrs,\n            thumbsrc: \"photos/thumbs/#{attrs.id}.jpg\" + app.urlKey\n            src: \"photos/#{attrs.id}.jpg\" + app.urlKey\n            orientation: attrs.orientation\n\n    # Return screen size photo src built from id.\n    getPrevSrc: ->\n        \"photos/#{@get 'id'}.jpg\"\n\nPhoto.listFromFiles = (page, callback)->\n    client.get \"files/#{page}\", callback\n\nPhoto.makeFromFile = (fileid, attr, callback) ->\n    client.post \"files/#{fileid}/toPhoto\", attr, callback","# read the file from photo.file using a FileReader\n# create photo.img : an Image object\nreadFile = (photo, next) ->\n    if photo.file.size > 10 * 1024 * 1024\n        return next t 'is too big (max 10Mo)'\n\n    if not photo.file.type.match /image\\/.*/\n        return next t 'is not an image'\n\n    reader = new FileReader()\n    photo.img = new Image()\n\n    reader.readAsDataURL photo.file\n    reader.onloadend = =>\n        photo.img.src = reader.result\n        photo.img.orientation = photo.attributes.orientation\n        photo.img.onload = ->\n            next()\n\n\n# resize an image into given dimensions\n# if fill, the image will be croped to fit in new dim\nresize = (photo, MAX_WIDTH, MAX_HEIGHT, fill) ->\n\n    max = width: MAX_WIDTH, height: MAX_HEIGHT\n    if (photo.img.width > photo.img.height) is fill\n        ratiodim = 'height'\n    else\n        ratiodim = 'width'\n\n    ratio = max[ratiodim] / photo.img[ratiodim]\n\n    newdims =\n        height: ratio * photo.img.height\n        width: ratio * photo.img.width\n\n    # use canvas to resize the image\n    canvas = document.createElement 'canvas'\n    canvas.width  = if fill then MAX_WIDTH  else newdims.width\n    canvas.height = if fill then MAX_HEIGHT else newdims.height\n    ctx = canvas.getContext '2d'\n    ctx.drawImage photo.img, 0, 0, newdims.width, newdims.height\n    return canvas.toDataURL photo.file.type\n\n\n# transform a dataUrl into a Blob\nblobify = (dataUrl, type) ->\n    binary = atob dataUrl.split(',')[1]\n    array = []\n    for i in [0..binary.length]\n        array.push binary.charCodeAt i\n    return new Blob [new Uint8Array(array)], type: type\n\n\n# create photo.thumb_du : a DataURL encoded thumbnail of photo.img\nmakeThumbDataURI = (photo, next) ->\n    photo.thumb_du = resize photo, 300, 300, true\n\n    photo.trigger 'thumbed'\n    next()\n\n\n# create photo.screen_du : a DataURL encoded thumbnail of photo.img\nmakeScreenDataURI = (photo, next) ->\n    photo.screen_du = resize photo, 1200, 800, false\n    next()\n\n\n# create photo.thumb : a Blob(~File) copy of photo.thumb_du\nmakeScreenBlob = (photo, next) ->\n    photo.thumb = blobify photo.thumb_du, photo.file.type\n    next()\n\n\n# create photo.screen : a Blob(~File) copy of photo.screen_du\nmakeThumbBlob = (photo, next) ->\n    photo.screen = blobify photo.screen_du, photo.file.type\n    next()\n\n\n# create a FormData object with photo.file, photo.thumb, photo.screen\n# save the model with these files\nupload = (photo, next) ->\n    formdata = new FormData()\n    for attr in ['title', 'description', 'albumid', 'orientation']\n        formdata.append attr, photo.get attr\n\n    formdata.append 'raw', photo.file\n    formdata.append 'thumb', photo.thumb, \"thumb_#{photo.file.name}\"\n    formdata.append 'screen', photo.screen, \"screen_#{photo.file.name}\"\n\n    # need to call sync directly so we can change the data\n    Backbone.sync 'create', photo,\n        contentType: false # Prevent $.ajax from being smart\n        data: formdata\n        success: (data) ->\n            photo.set photo.parse(data), silent: true\n            next()\n        error: ->\n            next t ' : upload failled' # clear tmps anyway\n        xhr: -> # add progress listener to XHR\n            xhr = $.ajaxSettings.xhr()\n            progress = (e) -> photo.trigger 'progress', e\n\n            if xhr instanceof window.XMLHttpRequest\n                xhr.addEventListener 'progress', progress, false\n            if xhr.upload\n                xhr.upload.addEventListener 'progress', progress, false\n            xhr\n\n\n# make screen sized version and upload\nuploadWorker = (photo, done) ->\n    async.waterfall [\n        (cb) -> readFile          photo, cb\n        (cb) -> makeThumbDataURI photo, cb\n        (cb) -> makeScreenDataURI photo, cb\n        (cb) -> makeScreenBlob    photo, cb\n        (cb) -> makeThumbBlob     photo, cb\n        (cb) -> upload            photo, cb\n        (cb) ->\n            # the photo is now backed by the server\n            # delete all object attached to the photo\n            delete photo.file\n            delete photo.img\n            delete photo.thumb\n            delete photo.thumb_du\n            delete photo.scren\n            delete photo.screen_du\n            setTimeout cb, 200\n    ], (err) ->\n        if err\n            photo.trigger 'upError', err\n        else\n            photo.trigger 'uploadComplete'\n\n        done err\n\n\nclass PhotoProcessor\n\n    # upload 2 by 2\n    uploadQueue: async.queue uploadWorker, 2\n\n    process: (photo) ->\n        @uploadQueue.push photo, (err) =>\n             return console.log err if err\n\nmodule.exports = new PhotoProcessor()\n","# Create an image node to get thumb prev data\nreadFile = (photo, next) ->\n\n    photo.img = new Image()\n    photo.img.onload = ->\n        next()\n    photo.img.src = photo.url\n\n\n# resize an image into given dimensions\n# if fill, the image will be croped to fit in new dim\nresize = (photo, MAX_WIDTH, MAX_HEIGHT, fill) ->\n\n    max = width: MAX_WIDTH, height: MAX_HEIGHT\n    if (photo.img.width > photo.img.height) is fill\n        ratiodim = 'height'\n    else\n        ratiodim = 'width'\n\n    ratio = max[ratiodim] / photo.img[ratiodim]\n\n    newdims =\n        height: ratio * photo.img.height\n        width: ratio * photo.img.width\n\n    # use canvas to resize the image\n    canvas = document.createElement 'canvas'\n    canvas.width  = if fill then MAX_WIDTH  else newdims.width\n    canvas.height = if fill then MAX_HEIGHT else newdims.height\n    ctx = canvas.getContext '2d'\n    ctx.drawImage photo.img, 0, 0, newdims.width, newdims.height\n    return canvas.toDataURL photo.file.type\n\n# transform a dataUrl into a Blob\nblobify = (dataUrl, type) ->\n    binary = atob dataUrl.split(',')[1]\n    array = []\n    for i in [0..binary.length]\n        array.push binary.charCodeAt i\n    return new Blob [new Uint8Array(array)], type: type\n\n\n# create photo.thumb_du : a DataURL encoded thumbnail of photo.img\nmakeThumbDataURI = (photo, next) ->\n    photo.thumb_du = resize photo, 300, 300, true\n    setTimeout next, 1\n\n# create photo.screen : a Blob(~File) copy of photo.screen_du\nmakeThumbBlob = (photo, next) ->\n    photo.thumb = blobify photo.thumb_du, photo.file.type\n    setTimeout next, 1\n\n\n# create a FormData object with photo.file, photo.thumb, photo.screen\n# save the model with these files\nupload = (photo, next) ->\n    formdata = new FormData()\n    formdata.append 'thumb', photo.thumb, \"thumb_#{photo.file.name}\"\n    $.ajax\n        url: \"photos/thumbs/#{photo.id}.jpg\"\n        data: formdata\n        cache: false\n        contentType: false\n        processData: false\n        type: 'PUT',\n        success: (data) ->\n            $(\"#rebuild-th\").append \"<p>#{photo.file.name} photo updated.</p>\"\n\n\n\n# make thumb and upload\nuploadWorker = (photo, done) ->\n    async.waterfall [\n        (cb) -> readFile          photo, cb\n        (cb) -> makeThumbDataURI photo, cb\n        (cb) -> makeThumbBlob     photo, cb\n        (cb) -> upload            photo, cb\n        (cb) ->\n            delete photo.img\n            delete photo.thumb\n            delete photo.thumb_du\n            cb()\n    ], (err) ->\n        done(err)\n\n\nclass ThumbProcessor\n\n    # upload 2 by 2\n    uploadQueue: async.queue uploadWorker, 2\n\n    process: (model) ->\n\n        photo =\n            url: model.getPrevSrc()\n            id: model.get 'id'\n            file:\n                type: 'image/jpeg'\n                name: model.get 'title'\n\n        #setTimeout =>\n            #@uploadQueue.push photo, (err) =>\n                #return console.log err if err\n        #, 300\n        uploadWorker photo, (err) ->\n            console.log err if err\n\n\nmodule.exports = new ThumbProcessor()\n","app            = require 'application'\nAlbumsListView = require 'views/albumslist'\nAlbumView      = require 'views/album'\nAlbum          = require 'models/album'\n\nmodule.exports = class Router extends Backbone.Router\n    routes:\n        ''                    : 'albumslist'\n        'albums'              : 'albumslist'\n        'albums/edit'         : 'albumslistedit'\n        'albums/new'          : 'newalbum'\n        'albums/:albumid'     : 'album'\n        'albums/:albumid/edit': 'albumedit'\n        'albums/:albumid/photo/:photoid': 'photo'\n        'albums/:albumid/edit/photo/:photoid': 'photoedit'\n\n    # display the \"home\" page : list of albums\n    albumslist: (editable=false)->\n        @displayView new AlbumsListView\n            collection: app.albums.sort()\n            editable: editable\n\n    # display the list of albums in edit mode\n    albumslistedit: ->\n        return @navigate 'albums', true if app.mode is 'public'\n        @albumslist true\n\n    # display the album view for an album with given id\n    # fetch before displaying it\n    album: (id, editable=false, callback) ->\n        if @mainView?.model?.get('id') is id\n\n            if editable\n                @mainView.makeEditable()\n            else\n                @mainView.makeNonEditable()\n\n            if callback\n                callback()\n            else\n                @mainView.closeGallery()\n\n        else\n            album = app.albums.get(id) or new Album id: id\n            album.fetch()\n                .done =>\n                    @displayView new AlbumView\n                        model: album\n                        editable: editable\n\n                    if callback\n                        callback()\n                    else\n                        @mainView.closeGallery()\n\n                .fail =>\n                    alert t 'this album does not exist'\n                    @navigate 'albums', true\n\n\n    # Display given photo from given album (non edit mode).\n    photo: (albumid, photoid) ->\n        @album albumid, false, =>\n            @mainView.showPhoto photoid\n\n\n    # Display given photo from given album (edit mode).\n    photoedit: (albumid, photoid) ->\n        @album albumid, true, =>\n            @mainView.showPhoto photoid\n\n\n    # display the album view in edit mode\n    albumedit: (id) ->\n        return @navigate 'albums', true if app.mode is 'public'\n        @album id, true\n        setTimeout ->\n            $('#title').focus()\n        , 200\n\n    # display the album view for a new Album\n    newalbum: ->\n        return @navigate 'albums', true if app.mode is 'public'\n        window.app.albums.create {},\n            success: (model) =>\n                @navigate \"albums/#{model.id}/edit\", true\n            error: =>\n                @navigate \"albums\", true\n\n    # display a page properly (remove previous page)\n    displayView: (view) =>\n        @mainView.remove() if @mainView\n        @mainView = view\n\n        el = @mainView.render().$el\n        el.addClass \"mode-#{app.mode}\"\n        $('body').append el\n\n    hashChange: (event) =>\n        if @cancelNavigate\n            event.stopImmediatePropagation()\n            @cancelNavigate = false\n        else\n\n            # default window title\n            document.title = t 'application title'\n\n            if @mainView and @mainView.dirty\n                if not(window.confirm t(\"Navigate before upload\"))\n                    event.stopImmediatePropagation()\n                    @cancelNavigate = true\n                    window.location.href = event.originalEvent.oldURL\n                else\n                    @mainView.dirty = false\n\n    beforeUnload: (event) =>\n        if @mainView and @mainView.dirty\n            # Chrome will display this message, Firefox won't\n            confirm = t(\"Navigate before upload\")\n        else\n            confirm = undefined\n        event.returnValue = confirm\n        return confirm\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),id = locals_.id,downloadPath = locals_.downloadPath,photosNumber = locals_.photosNumber,clearance = locals_.clearance,title = locals_.title,description = locals_.description;\nbuf.push(\"<div id=\\\"about\\\"><div class=\\\"clearfix\\\"><div id=\\\"links\\\" class=\\\"clearfix\\\"><p class=\\\"back\\\"><a href=\\\"#albums\\\" class=\\\"flatbtn\\\"><span class=\\\"fa fa-arrow-left icon-white\\\"></span><span>\" + (jade.escape(null == (jade_interp = t(\"Back\")) ? \"\" : jade_interp)) + \"</span></a></p><p class=\\\"startediting\\\"><a\" + (jade.attr(\"href\", \"#albums/\" + (id) + \"/edit\", true, false)) + \" class=\\\"flatbtn\\\"><span class=\\\"fa fa-edit icon-white\\\"></span><span>\" + (jade.escape(null == (jade_interp = t(\"Edit\")) ? \"\" : jade_interp)) + \"</span></a></p><p class=\\\"stopediting\\\"><a\" + (jade.attr(\"href\", \"#albums/\" + (id) + \"\", true, false)) + \" class=\\\"flatbtn stopediting\\\"><span class=\\\"fa fa-save icon-white\\\"></span><span>\" + (jade.escape(null == (jade_interp = t(\"Stop editing\")) ? \"\" : jade_interp)) + \"</span></a></p><p class=\\\"download\\\"><a\" + (jade.attr(\"href\", \"\" + (downloadPath) + \"\", true, false)) + \" class=\\\"flatbtn\\\"><span class=\\\"fa fa-download icon-white\\\"></span><span>\" + (jade.escape(null == (jade_interp = t(\"Download\")) ? \"\" : jade_interp)) + \"</span></a></p><p class=\\\"delete\\\"><a class=\\\"flatbtn delete\\\"><span class=\\\"fa fa-trash icon-white\\\"></span><span>\" + (jade.escape(null == (jade_interp = t(\"Delete\")) ? \"\" : jade_interp)) + \"</span></a></p><p class=\\\"clearance\\\"><a class=\\\"flatbtn clearance\\\"><span class=\\\"fa fa-share-alt icon-white\\\"></span><span>\" + (jade.escape(null == (jade_interp = t(\"share\")) ? \"\" : jade_interp)) + \"</span></a></p></div><div id=\\\"album-text\\\"><div id=\\\"album-text-background\\\"><div class=\\\"right\\\"><p><span class=\\\"photo-number\\\">\" + (jade.escape(null == (jade_interp = photosNumber) ? \"\" : jade_interp)) + \"</span><br/><span>\" + (jade.escape(null == (jade_interp = t(\"picture\", {smart_count: photosNumber})) ? \"\" : jade_interp)) + \"</span></p></div><form class=\\\"left\\\"><div><span class=\\\"clearance-state\\\">\");\nif ( clearance == 'public')\n{\nbuf.push(\"<span class=\\\"fa fa-globe\\\"></span>&nbsp;\\n\" + (jade.escape((jade_interp = t('shared')) == null ? '' : jade_interp)) + \"\");\n}\nelse if ( clearance && clearance.length > 0)\n{\nbuf.push(\"<span class=\\\"fa fa-share-alt\\\"></span>&nbsp;\\n\" + (jade.escape((jade_interp = t('shared')) == null ? '' : jade_interp)) + \"\");\nif ( clearance.length)\n{\nbuf.push(\"<span>&nbsp;(\" + (jade.escape((jade_interp = clearance.length) == null ? '' : jade_interp)) + \")</span>\");\n}\n}\nbuf.push(\"</span></div><input id=\\\"title\\\" type=\\\"text\\\"\" + (jade.attr(\"placeholder\", \"\" + (t('title placeholder')) + \"\", true, false)) + (jade.attr(\"value\", title, true, false)) + \"/><textarea id=\\\"description\\\"\" + (jade.attr(\"placeholder\", \"\" + (t('description placeholder')) + \"\", true, false)) + \">\" + (null == (jade_interp = description) ? \"\" : jade_interp) + \"</textarea></form></div></div></div></div><div id=\\\"photos\\\" class=\\\"clearfix\\\"></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<a id=\\\"create-album-link\\\" href=\\\"#albums/new\\\" class=\\\"create\\\"><span>\" + (jade.escape(null == (jade_interp = t('Create a new album')) ? \"\" : jade_interp)) + \"</span></a><p class=\\\"help\\\">\" + (jade.escape(null == (jade_interp = t('There is no public albums.')) ? \"\" : jade_interp)) + \"</p>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),id = locals_.id,isRecent = locals_.isRecent,thumbsrc = locals_.thumbsrc,folderid = locals_.folderid,title = locals_.title;\nbuf.push(\"<a\" + (jade.attr(\"id\", \"\" + (id) + \"\", true, false)) + (jade.attr(\"href\", \"#albums/\" + (id) + \"\", true, false)) + (jade.cls([isRecent], [true])) + \"><img\" + (jade.attr(\"src\", \"\" + (thumbsrc) + \"\", true, false)) + \"/><span class=\\\"title\\\">\");\nif ( folderid == \"all\")\n{\nbuf.push(jade.escape(null == (jade_interp = title) ? \"\" : jade_interp));\n}\nelse\n{\nbuf.push(\"<b>\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</b>\");\n}\nbuf.push(\"</span></a>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),dates = locals_.dates,hasPrev = locals_.hasPrev,hasNext = locals_.hasNext,photos = locals_.photos;\nbuf.push(\"<div class=\\\"files\\\">\");\nif ( dates.length === 0)\n{\nbuf.push(\"<p>\" + (jade.escape(null == (jade_interp = t(\"photos search\")) ? \"\" : jade_interp)) + \"</p>\");\n}\nelse if ( dates === \"No photos found\")\n{\nbuf.push(\"<p>\" + (jade.escape(null == (jade_interp = t(\"no photos found\")) ? \"\" : jade_interp)) + \"</p>\");\n}\nelse\n{\nbuf.push(\"<nav><ul>\");\nif ( hasPrev)\n{\nbuf.push(\"<li><a class=\\\"btn btn-cozy prev\\\"><i class=\\\"fa fa-angle-left\\\"></i><span>\" + (jade.escape((jade_interp = t('modal prev')) == null ? '' : jade_interp)) + \"</span></a></li>\");\n}\nif ( hasNext)\n{\nbuf.push(\"<li><a class=\\\"btn btn-cozy next\\\"><span>\" + (jade.escape((jade_interp = t('modal next')) == null ? '' : jade_interp)) + \"</span><i class=\\\"fa fa-angle-right\\\"></i></a></li>\");\n}\nbuf.push(\"</ul></nav><dl>\");\n// iterate dates\n;(function(){\n  var $$obj = dates;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var date = $$obj[$index];\n\nbuf.push(\"<dt>\" + (jade.escape((jade_interp = t(date.split('-')[1])) == null ? '' : jade_interp)) + \" \" + (jade.escape((jade_interp = date.split('-')[0]) == null ? '' : jade_interp)) + \"</dt><dd><ul class=\\\"thumbs\\\">\");\n// iterate photos[date]\n;(function(){\n  var $$obj = photos[date];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var photo = $$obj[$index];\n\nbuf.push(\"<li><img\" + (jade.attr(\"src\", \"files/thumbs/\" + (photo.id) + \".jpg\", true, false)) + (jade.attr(\"id\", \"\" + (photo.id) + \"\", true, false)) + \"/></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var photo = $$obj[$index];\n\nbuf.push(\"<li><img\" + (jade.attr(\"src\", \"files/thumbs/\" + (photo.id) + \".jpg\", true, false)) + (jade.attr(\"id\", \"\" + (photo.id) + \"\", true, false)) + \"/></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul></dd>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var date = $$obj[$index];\n\nbuf.push(\"<dt>\" + (jade.escape((jade_interp = t(date.split('-')[1])) == null ? '' : jade_interp)) + \" \" + (jade.escape((jade_interp = date.split('-')[0]) == null ? '' : jade_interp)) + \"</dt><dd><ul class=\\\"thumbs\\\">\");\n// iterate photos[date]\n;(function(){\n  var $$obj = photos[date];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var photo = $$obj[$index];\n\nbuf.push(\"<li><img\" + (jade.attr(\"src\", \"files/thumbs/\" + (photo.id) + \".jpg\", true, false)) + (jade.attr(\"id\", \"\" + (photo.id) + \"\", true, false)) + \"/></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var photo = $$obj[$index];\n\nbuf.push(\"<li><img\" + (jade.attr(\"src\", \"files/thumbs/\" + (photo.id) + \".jpg\", true, false)) + (jade.attr(\"id\", \"\" + (photo.id) + \"\", true, false)) + \"/></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul></dd>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</dl><nav><ul>\");\nif ( hasPrev)\n{\nbuf.push(\"<li><a class=\\\"btn btn-cozy prev\\\"><i class=\\\"fa fa-angle-left\\\"></i><span>\" + (jade.escape((jade_interp = t('modal prev')) == null ? '' : jade_interp)) + \"</span></a></li>\");\n}\nif ( hasNext)\n{\nbuf.push(\"<li><a class=\\\"btn btn-cozy next\\\"><span>\" + (jade.escape((jade_interp = t('modal next')) == null ? '' : jade_interp)) + \"</span><i class=\\\"fa fa-angle-right\\\"></i></a></li>\");\n}\nbuf.push(\"</ul></nav>\");\n}\nbuf.push(\"</div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<p class=\\\"help\\\">\" + (jade.escape(null == (jade_interp = t('There is no photos in this album')) ? \"\" : jade_interp)) + \"</p><div id=\\\"upload-actions\\\"><div id=\\\"upload-block\\\" class=\\\"flatbtn\\\"><input id=\\\"uploader\\\" type=\\\"file\\\" multiple=\\\"multiple\\\"/><div class=\\\"pa2\\\">\" + (jade.escape(null == (jade_interp = t('pick from computer')) ? \"\" : jade_interp)) + \"</div></div><div id=\\\"browse-files\\\" class=\\\"flatbtn\\\"><div class=\\\"pa2\\\">\" + (jade.escape(null == (jade_interp = t('pick from files')) ? \"\" : jade_interp)) + \"</div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),src = locals_.src,title = locals_.title,thumbsrc = locals_.thumbsrc;\nbuf.push(\"<a\" + (jade.attr(\"href\", \"\" + (src) + \"\", true, false)) + (jade.attr(\"title\", \"\" + (title) + \"\", true, false)) + \"><img\" + (jade.attr(\"src\", \"\" + (thumbsrc) + \"\", true, false)) + (jade.attr(\"alt\", \"\" + (title) + \"\", true, false)) + \"/><div class=\\\"progressfill\\\"></div></a><button class=\\\"delete flatbtn\\\"><i class=\\\"fa fa-times icon-white\\\"></i></button>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","app = require 'application'\n\nBaseView = require 'lib/base_view'\nGalery = require 'views/galery'\nClipboard = require 'lib/clipboard'\n\nthProcessor = require 'models/thumbprocessor'\nCozyClearanceModal = require 'cozy-clearance/modal_share_view'\nclipboard = new Clipboard()\n\nTAB_KEY_CODE = 9\n\nclass ShareModal extends CozyClearanceModal\n    initialize: ->\n        super\n        @refresh()\n\n    # override makeURL to append the key in the middle of the url\n    # see: models/album:getPublicURL\n    makeURL: (key) -> @model.getPublicURL key\n\n\nmodule.exports = class AlbumView extends BaseView\n    template: require 'templates/album'\n\n    id: 'album'\n    className: 'container-fluid'\n\n    events: =>\n        'click a.delete': @destroyModel\n        'click a.clearance': @changeClearance\n        'click a.sendmail': @sendMail\n        'click a#rebuild-th-btn': @rebuildThumbs\n        'click a.stopediting': @checkNew\n        'blur #title': @onTitleChanged\n        'blur #description': @onDescriptionChanged\n        'click #title': @onFieldClicked\n        'click #description': @onFieldClicked\n        'mousedown #title': @onFieldClicked\n        'mousedown #description': @onFieldClicked\n        'mouseup #title': @onFieldClicked\n        'mouseup #description': @onFieldClicked\n        'keydown #description': @onDescriptionKeyUp\n\n\n    initialize: (options) ->\n        super options\n\n        # debounce the call to `@onPhotoCollectionChange` to prevent spamming\n        # server with useless `PUT` on album just to update the `updated` date\n        # when bulk-adding items to collection.\n        onPhotoCollectionChange = _.debounce @onPhotoCollectionChange, 50\n        @listenTo @model.photos, 'add remove', onPhotoCollectionChange\n        @listenTo @model, 'change:clearance', @render\n\n    getRenderData: ->\n        key = $.url().param('key')\n        downloadPath = \"albums/#{@model.get 'id'}.zip\"\n        downloadPath += \"?key=#{key}\" if key?\n\n        res = _.extend\n            downloadPath: downloadPath\n            photosNumber: @model.photos.length\n        , @model.attributes\n        res\n\n    afterRender: ->\n\n        # Use title of album as window title\n        document.title = \"#{t 'application title'} - #{@model.get 'title'}\"\n\n        @title = @$ '#title'\n        @description = @$ '#description'\n\n        @galery = new Galery\n            el: @$ '#photos'\n            editable: @options.editable\n            collection: @model.photos\n            beforeUpload: @beforePhotoUpload\n\n        @galery.album = @model\n        @galery.render()\n\n        if @options.editable\n            @makeEditable()\n        else\n            @title.addClass 'disabled'\n            @description.addClass 'disabled'\n\n\n    beforePhotoUpload: (callback) =>\n        callback albumid: @model.id\n\n    onTitleChanged: =>\n        @saveModel title: @title.val().trim()\n\n    onDescriptionChanged: =>\n        @saveModel description: @description.val().trim()\n\n    makeEditable: =>\n        document.title = \"#{t 'application title'} - #{@model.get 'title'}\"\n        @$el.addClass 'editing'\n        @options.editable = true\n        @galery.options.editable = true\n\n    makeNonEditable: =>\n        document.title = \"#{t 'application title'} - #{@model.get 'title'}\"\n        @$el.removeClass 'editing'\n        @options.editable = false\n        @galery.options.editable = false\n\n    onFieldClicked: (event) =>\n        unless @options.editable\n            event.preventDefault()\n            false\n\n    # Ask for confirmation if album is not new.\n    destroyModel: ->\n        if confirm t \"are you sure you want to delete this album\"\n            @model.destroy().then ->\n                app.router.navigate 'albums', true\n\n    checkNew: (event) =>\n        if @model.get('title') is '' and\n           @model.get('description') is '' and\n           @model.photos.length is 0\n            if confirm t 'delete empty album'\n                event.preventDefault()\n                @model.destroy().then ->\n                    app.router.navigate 'albums', true\n        true\n\n    # Change sharing state of the album.\n    changeClearance: (event) =>\n        @model.set 'clearance', [] unless @model.get('clearance')?\n        @model.set 'type', 'album'\n        new ShareModal\n            model: @model\n\n    # Temporary tool to allow people to rebuild the thumbnails with size\n    # set recently. New size is larger, so older thumbs looks blurry.\n    # This function recalculate them with the right size\n    rebuildThumbs: (event) ->\n        $(\"#rebuild-th p\").remove()\n        models = @model.photos.models\n\n        recFunc = ->\n            if models.length > -1\n                model = models.pop()\n                setTimeout ->\n                    thProcessor.process model\n                    recFunc()\n                , 500\n        recFunc()\n\n    onDescriptionKeyUp: (event) ->\n        if TAB_KEY_CODE in [event.keyCode, event.which]\n            $('.stopediting').focus()\n\n    saveModel: (data) ->\n        data.updated = Date.now()\n        @model.save data\n\n    onPhotoCollectionChange: =>\n        @model.save updated: Date.now()\n        # updates the photo counter\n        @$('.photo-number').html @model.photos.length\n\n    # Force display of given photo.\n    showPhoto: (photoid) ->\n        @galery.showPhoto photoid\n\n    # Force galery to close.\n    closeGallery: ->\n        @galery.closePhotobox()\n\n","ViewCollection = require 'lib/view_collection'\napp = require 'application'\n\n# \"Home\" view : the list of album\n# simple ViewCollection\n# pass editable options to children\n\nmodule.exports = class AlbumsList extends ViewCollection\n    id: 'album-list'\n    itemView: require 'views/albumslist_item'\n    template: require 'templates/albumlist'\n\n    initialize: ->\n        super\n\n    checkIfEmpty: =>\n        @$('.help').toggle _.size(@views) is 0 and app.mode is 'public'\n\n    afterRender: ->\n        super\n","BaseView = require 'lib/base_view'\n{limitLength} = require 'lib/helpers'\nhelpers = require 'lib/helpers'\n\n# Item View for the albums list\nmodule.exports = class AlbumItem extends BaseView\n    className: 'albumitem'\n    template: require 'templates/albumlist_item'\n\n    initialize: ->\n        @listenTo @model, 'change', => @render()\n\n    getRenderData: ->\n        out = _.clone @model.attributes\n        out.description = limitLength out.description, 250\n        out.thumbsrc =  @model.getThumbSrc()\n        # Album is recent if it has been updated in less than 60s\n        out.isRecent = if (out.updated? and out.updated - Date.now() < 60000) then 'recent' else ''\n        return out\n\n    afterRender: ->\n        @image = @$ 'img'\n        @image.attr 'src', @model.getThumbSrc()\n        helpers.rotate @model.attributes.orientation, @image\n        # remove loading background one image is loaded\n        if @image.get(0).complete\n            @onImageLoaded()\n        else\n            @image.on 'load', =>\n                @onImageLoaded()\n\n    onImageLoaded: ->\n        @image.addClass 'loaded'\n","Modal = require 'cozy-clearance/modal'\nPhoto = require '../models/photo'\n\n\nmodule.exports = class FilesBrowser extends Modal\n\n    id: 'files-browser-modal'\n    template_content: require '../templates/browser'\n    title: t 'pick from files'\n    content: '<p>Loading ...</p>'\n\n    events: -> _.extend super,\n        'click img': 'toggleSelected'\n        'click a.next': 'displayNextPage'\n        'click a.prev': 'displayPrevPage'\n\n    toggleSelected: (e) ->\n        $el = $(e.target)\n        # Get the index of the selected element in the list\n        index = $el.parent().index()\n        # If shiftKey is pressed, then select the whole range of items\n        # between the last selected element and the current one\n        if @lastSelectedIndex? and e.shiftKey\n            if index > @lastSelectedIndex\n                first = @lastSelectedIndex\n                last = index\n            else if index < @lastSelectedIndex\n                first = index\n                last = @lastSelectedIndex\n            # Filter all elements to get those in range and select it too\n            @$('.thumbs li')\n            .filter (index) ->\n                return first <= index <= last\n            .find('img').addClass 'selected'\n        else\n            $el.toggleClass 'selected'\n        @lastSelectedIndex = index\n\n    getRenderData: -> @options\n\n    initialize: (options) ->\n        @yes = t 'modal ok'\n        @no = t 'modal cancel'\n\n        # stores index of the last selected element for range select w/ shiftKey\n        @lastSelectedIndex = null\n\n        # Prepare option\n        if not options.page?\n            super {}\n\n        if not options.page?\n            options.page = 0\n\n        if not options.selected?\n            @options.selected = []\n\n        @options.page = options.page\n\n        # Recover files\n        Photo.listFromFiles options.page, (err, body) =>\n            dates = body.files if body?.files?\n\n            if err\n                return console.log err\n\n            # If there is no photos in Cozy\n            else if dates? and Object.keys(dates).length is 0\n                @options.dates = \"No photos found\"\n\n            else\n                # Add next/prev button\n                @options.hasNext = body.hasNext if body?.hasNext?\n                @options.hasPrev = options.page isnt 0\n                @options.dates = Object.keys dates\n                @options.dates.sort (a, b) ->\n                    -1 * a.localeCompare b\n                @options.photos = dates\n\n            @$('.modal-body').html @template_content @getRenderData()\n            @$('.modal-body').scrollTop(0)\n            # Add selected files\n            if @options.selected[@options.page]?\n                for img in @options.selected[@options.page]\n                    @$(\"##{img.id}\").toggleClass 'selected'\n\n\n    cb: (confirmed) ->\n        return unless confirmed\n        @options.beforeUpload (attrs) =>\n            # flatten selection of photos accross pages\n            @options.selected[@options.page] = @$('.selected')\n            sel = [].concat.apply [], @options.selected.map (jq) -> jq.get()\n\n            addImageToCollection = (img) ->\n                attrs.title = img.name\n                # creates a tmp version with the selected image from the browser\n                photo      = new Photo attrs\n                photo.file = img\n                # in the mean time, trigger an update to the server to get the\n                # final version of the image\n                Photo.makeFromFile img.id, attrs, (err, attributes) ->\n                    if err\n                        console.error err\n                    else\n                        photo.save attributes\n                return photo\n\n            # each (tmp) files processed, bulk-add them to the collection\n            @collection.add (addImageToCollection img for img in sel)\n\n\n    displayNextPage: ->\n        # Display next page: store selected files\n        @options.selected[@options.page] = @$('.selected')\n        options =\n            page: @options.page + 1\n            selected: @options.selected\n        @initialize options\n\n    displayPrevPage: ->\n        # Display prev page: store selected files\n        @options.selected[@options.page] = @$('.selected')\n        options =\n            page: @options.page - 1\n            selected: @options.selected\n        @initialize options\n\n","ViewCollection = require 'lib/view_collection'\nhelpers = require 'lib/helpers'\nFilesBrowser = require './browser'\nPhotoView = require 'views/photo'\nPhoto = require 'models/photo'\nphotoprocessor = require 'models/photoprocessor'\napp = require 'application'\n\n# galery : collection of PhotoViews\nmodule.exports = class Galery extends ViewCollection\n    itemView: PhotoView\n\n    template: require 'templates/galery'\n\n    # D&D events\n    events: ->\n        'drop'     : 'onFilesDropped'\n        'dragover' : 'onDragOver'\n        'dragleave' : 'onDragLeave'\n        # change isn't fired on first click ???\n        #'change #uploader': 'onFilesChanged'\n        'click #uploader': 'onFilesClick'\n        'click #browse-files': 'displayBrowser'\n\n\n    initialize: ->\n        super\n        # when the cover picture is deleted, we remove it from the album\n        @listenTo @collection, 'destroy', @onPictureDestroyed\n\n\n    # launch photobox after render\n    afterRender: ->\n        super\n        @$el.photobox 'a.server',\n            thumbs: true\n            history: false\n            zoomable: false\n            beforeShow: @beforeImageDisplayed\n            afterClose: @onAfterClosed\n        , @onImageDisplayed\n\n        # Addition to photobox ui to give more control to the user.\n\n        # Add button to return photo to left\n        if app.mode isnt 'public'\n            if $('#pbOverlay .pbCaptionText .btn-group').length is 0\n                $('#pbOverlay .pbCaptionText')\n                    .append('<div class=\"btn-group\"></div>')\n            @turnLeft = $('#pbOverlay .pbCaptionText .btn-group .left')\n            @turnLeft.unbind 'click'\n            @turnLeft.remove()\n            if navigator.userAgent.search(\"Firefox\") isnt -1\n                transform = \"transform\"\n            else\n                transform = \"-webkit-transform\"\n            @turnLeft = $('<a id=\"left\" class=\"btn left\" type=\"button\">\n                         <i class=\"fa fa-undo\"> </i> </a>')\n                .appendTo '#pbOverlay .pbCaptionText .btn-group'\n            @turnLeft.on 'click', @onTurnLeft\n\n            # Add button to return photo to right\n            @turnRight = $('#pbOverlay .pbCaptionText .btn-group .right')\n            @turnRight.unbind 'click'\n            @turnRight.remove()\n            @turnRight = $('<a id=\"right\" class=\"btn right\">\n                           <i class=\"fa fa-repeat\" </i> </a>')\n                .appendTo '#pbOverlay .pbCaptionText .btn-group'\n            @turnRight.on 'click', @onTurnRight\n\n\n\n            # Cover button to select cover\n            @coverBtn = $('#pbOverlay .pbCaptionText .btn-group .cover-btn')\n            @coverBtn.unbind 'click'\n            @coverBtn.remove()\n            @coverBtn = $('<a id=\"cover-btn\" class=\"btn cover-btn\">\n                           <i class=\"fa fa-star\" </i> </a>')\n                .appendTo '#pbOverlay .pbCaptionText .btn-group'\n            @coverBtn.on 'click', @onCoverClicked\n\n            # Add button to delete photo\n            @trashBtn = $('#pbOverlay .pbCaptionText .btn-group .trash-btn')\n            @trashBtn.unbind 'click'\n            @trashBtn.remove()\n            @trashBtn = $('<a id=\"trash-btn\" class=\"btn trash-btn\">\n                           <i class=\"fa fa-trash\" </i> </a>')\n                .appendTo '#pbOverlay .pbCaptionText .btn-group'\n            @trashBtn.on 'click', @onTrashClicked\n\n\n        # Add link to download photo\n        @downloadLink = $('#pbOverlay .pbCaptionText .btn-group .download-link')\n        @downloadLink.unbind 'click'\n        @downloadLink.remove()\n        unless @downloadLink.length\n            @downloadLink =\n                $('<a class=\"btn download-link\" download>\n                  <i class=\"fa fa-download\"></i></a>')\n                .appendTo '#pbOverlay .pbCaptionText .btn-group'\n\n        @uploader = @$('#uploader')\n\n\n        if app.mode isnt 'public'\n            for key, view of @views\n                view.collection = @collection\n\n\n    checkIfEmpty: =>\n        @$('.help').toggle _.size(@views) is 0 and app.mode is 'public'\n\n\n    # event listeners for D&D events\n    onFilesDropped: (evt) ->\n        if @options.editable\n            @$el.removeClass 'dragover'\n            @handleFiles evt.dataTransfer.files\n            evt.stopPropagation()\n            evt.preventDefault()\n        return false\n\n\n    # Display orange background telling that drag is active.\n    onDragOver: (evt) ->\n        if @options.editable\n            @$el.addClass 'dragover'\n            evt.preventDefault()\n            evt.stopPropagation()\n        return false\n\n\n    onDragLeave: (evt) ->\n        if @options.editable\n            @$el.removeClass 'dragover'\n            evt.preventDefault()\n            evt.stopPropagation()\n        return false\n\n\n    # Extract photo id from its URL. It's useful to get the id of the current\n    # picture when the user browses them via photobox.\n    getIdPhoto: (url) ->\n        url ?= $('#pbOverlay .wrapper img').attr 'src'\n        parts = url.split('/')\n        id = parts[parts.length - 1]\n        id = id.split('.')[0]\n        # if collection has not been saved, we must search by url\n        if not @collection.get(id)?\n            photo = @collection.find (e) ->\n                return e.attributes.src.split('/').pop().split('.')[0] is id\n            if photo?\n                id = photo.cid\n        return id\n\n\n    # Rotate 90 left the picture by updating css and orientation.\n    # Save result to Cozy database.\n    onTurnLeft: () =>\n        id = @getIdPhoto()\n        orientation = @collection.get(id)?.attributes.orientation\n        orientation = 1 unless orientation?\n        newOrientation =\n            helpers.rotateLeft orientation, $('.wrapper img')\n        helpers.rotate newOrientation, $('.wrapper img')\n        @collection.get(id)?.save orientation: newOrientation,\n            success : () ->\n                helpers.rotate newOrientation, $('.pbThumbs .active img')\n\n\n    # Rotate 90 right the picture by updating css and orientation.\n    onTurnRight: () =>\n        id = @getIdPhoto()\n        orientation = @collection.get(id)?.attributes.orientation\n        newOrientation =\n            helpers.rotateRight orientation, $('.wrapper img')\n        helpers.rotate newOrientation, $('.wrapper img')\n        @collection.get(id)?.save orientation: newOrientation,\n            success : () ->\n                helpers.rotate newOrientation, $('.pbThumbs .active img')\n\n\n    # When cover button is clicked, the current picture is set on the current\n    # album as cover. Then information are saved.\n    onCoverClicked: () =>\n        @coverBtn.addClass 'disabled'\n        photoId = @getIdPhoto()\n        @album.set 'coverPicture', photoId\n        @album.set 'thumb', photoId\n        @album.set 'thumbsrc', @album.getThumbSrc()\n        @album.save null,\n            success: =>\n                @coverBtn.removeClass 'disabled'\n                alert t 'photo successfully set as cover'\n            error: =>\n                @coverBtn.removeClass 'disabled'\n                alert t 'problem occured while setting cover'\n\n\n    onPictureDestroyed: (destroyed) =>\n        if destroyed.id is @album.get 'coverPicture'\n            @album.save coverPicture: null\n\n\n    onFilesChanged: (evt) =>\n        @handleFiles @uploader[0].files\n        # reset the input\n        old = @uploader\n        @uploader = old.clone true\n        old.replaceWith @uploader\n\n\n    onFilesClick: (evt) ->\n        element = document.getElementById('uploader')\n        element.addEventListener 'change', @onFilesChanged\n\n\n    # When trash button is clicked it proposes to delete the currently\n    # displayed picture. It asks for a confirmation before\n    onTrashClicked: =>\n      if confirm t 'photo delete confirm'\n          photo = @collection.get(@getIdPhoto())\n          photo.destroy()\n\n\n    beforeImageDisplayed: (link) =>\n        id = @getIdPhoto link.href\n        orientation = @collection.get(id)?.attributes.orientation\n        $('#pbOverlay .wrapper img')[0].dataset.orientation = orientation\n\n\n    onImageDisplayed: (args) =>\n        @isViewing = true\n        # Initialize download link\n        url = $('.pbThumbs .active img').attr 'src'\n        id = @getIdPhoto()\n\n        if @options.editable\n            app.router.navigate \"albums/#{@album.id}/edit/photo/#{id}\", false\n        else\n            app.router.navigate \"albums/#{@album.id}/photo/#{id}\", false\n\n        @downloadLink.attr 'href', url.replace 'thumbs', 'raws'\n\n        # Rotate thumbs\n        thumbs = $('#pbOverlay .pbThumbs img')\n        for thumb in thumbs\n            url = thumb.src\n            parts = url.split('/')\n            id = parts[parts.length - 1]\n            id = id.split('.')[0]\n            orientation = @collection.get(id)?.attributes.orientation\n            helpers.rotate orientation, $(thumb)\n\n\n    onAfterClosed: =>\n        @isViewing = false\n        if @options.editable\n            app.router.navigate \"albums/#{@album.id}/edit\", true\n        else\n            app.router.navigate \"albums/#{@album.id}\", true\n\n\n    # For each file, add a photo object to the galery, creates its thumbnails\n    # and save them to the server.\n    # When the process is finished, the first picture is set as the album cover\n    # if no cover is et.\n    handleFiles: (files) ->\n        # Set the view as dirty to warn users it will cancel the upload\n        # if he leaves the page during the upload.\n        app.router.mainView.dirty = true\n\n        # Prepare common attributes for all pictures.\n        @options.beforeUpload (photoAttributes) =>\n            @uploadCounter = 0\n\n            # Add a photo to the collection, to avoid browser freezing,\n            # after 20 pictures, it waits for 10ms (and release execution loop)\n            # before adding pictures to the collection and the view.\n            addPhotoAndBreath = (file, callback) =>\n                photo = @addPhoto file, photoAttributes\n\n                # When the first photo is uploaded, it is set as the album\n                # cover.\n                if @uploadCounter is 0\n                    photo.on 'uploadComplete', =>\n                        @setCoverPicture photo\n\n                if @uploadCounter > 20\n                    setTimeout callback, 10\n                else\n                    @uploadCounter++\n                    callback()\n\n            # Process all file creations\n            async.eachSeries files, addPhotoAndBreath, =>\n\n                # save reference to the collection on each view.\n                view.collection = @collection for key, view of @views\n                app.router.mainView.dirty = false\n\n\n    # Add photo to current collection and enqueue its remote creation.\n    addPhoto: (file, photoAttributes) =>\n        photoAttributes.title = file.name\n        photo = new Photo photoAttributes\n        photo.file = file\n\n        @collection.add photo\n        photoprocessor.process photo\n\n        photo\n\n\n    # Set the first picture of the galery as the cover picture of the album.\n    setCoverPicture: (photo) =>\n        unless @album.get('coverPicture')?\n            @album.save coverPicture: photo.get 'id'\n\n\n    # Display photo picker that allows to select pictures from the Files\n    # application.\n    displayBrowser: ->\n        new FilesBrowser\n            model: @album\n            collection: @collection\n            beforeUpload: @options.beforeUpload\n\n\n    # Display photo given in URL by triggering a photobox click event on the\n    # given photo.\n    showPhoto: (photoid) ->\n        url = \"photos/#{photoid}.jpg\"\n        $('a[href=\"' + url + '\"]').trigger('click.photobox')\n\n\n    # Close galery via photobox close button.\n    closePhotobox: ->\n        if @isViewing\n            $('#pbCloseBtn').click()\n\n","BaseView = require 'lib/base_view'\nhelpers = require 'lib/helpers'\n\ntransitionendEvents = [\n    \"transitionend\", \"webkitTransitionEnd\", \"oTransitionEnd\", \"MSTransitionEnd\"\n].join(\" \")\n\n# View for a single photo\n# Expected options {model, editable}\nmodule.exports = class PhotoView extends BaseView\n    template: require 'templates/photo'\n    className: 'photo'\n\n    initialize: (options) ->\n        super\n        @listenTo @model, 'progress',        @onProgress\n        @listenTo @model, 'thumbed',         @onThumbed\n        @listenTo @model, 'upError',         @onError\n        @listenTo @model, 'uploadComplete',  @onServer\n        @listenTo @model, 'change',          => @render()\n\n    events: ->\n        'click' : 'onClickListener'\n        'click .delete' : 'destroyModel'\n\n    getRenderData: -> @model.attributes\n\n    afterRender: ->\n        @link =        @$ 'a'\n        @image =       @$ 'img'\n        @progressbar = @$ '.progressfill'\n        helpers.rotate @model.get('orientation'), @image\n        @link.addClass 'server' unless @model.isNew()\n        # remove loading background one image is loaded\n        if @image.get(0).complete\n            @onImageLoaded()\n        else\n            @image.on 'load', =>\n                @onImageLoaded()\n\n    setProgress: (percent) ->\n        @progressbar.css 'width', percent + '%'\n\n    # when the upload progresses\n    onProgress: (event) ->\n        @setProgress 10 + 90 * event.loaded / event.total\n\n    # when the thumb is ready, it is displayed.\n    onThumbed: ->\n        @setProgress 10\n        @image.attr 'src', @model.thumb_du\n        @image.attr 'orientation', @model.get('orientation')\n        @image.addClass 'thumbed'\n\n    # when the upload is complete, the view of the photo is refreshed via a\n    # remove/add.\n    onServer: ->\n        # detach-reatach so photobox can pick up the object\n        preload = new Image()\n        preload.onerror = preload.onload = =>\n            @render()\n\n        preload.src = \"photos/thumbs/#{@model.id}.jpg\"\n        # image loaded, we can navigate away\n        app.router.mainView.dirty = false\n\n    # when an error occured, the photo is marked with error image.\n    onError: (err) ->\n        @setProgress 0\n        @error = @model.get('title') + \" \" + err\n        @link.attr 'title', @error\n        @image.attr 'src', 'img/error.gif'\n\n    # Prevent opening the gallery if the photos\n    # hasn't been upload yet\n    onClickListener: (evt) =>\n\n        if @model.isNew()\n            alert @error if @error\n            evt.stopPropagation()\n            evt.preventDefault()\n            return false\n\n    destroyModel: ->\n        @$('.delete').html '&nbsp;&nbsp;&nbsp;&nbsp;'\n        @$('.delete').spin 'small'\n        @$el.fadeOut =>\n            @model.destroy\n                success: =>\n                    @collection.remove @model\n                    @remove()\n\n    onImageLoaded: ->\n        @image.addClass 'loaded'\n"]}